Type.registerNamespace("ECP");var FolderPickerType=function(){};FolderPickerType.prototype={rulesFolderPicker:0,voiceMailFolderPicker:1};FolderPickerType.registerEnum("FolderPickerType",!1);function GroupNamingPolicyEditorContext(){}var IEditControl=function(){};IEditControl.registerInterface("IEditControl");var DuplicateHandlingType=function(){};DuplicateHandlingType.prototype={removeDuplicateCaseInsensitive:0,removeDuplicateCaseSensitive:1,allowDuplicate:2};DuplicateHandlingType.registerEnum("DuplicateHandlingType",!1);var CallerIdItemType=function(){};CallerIdItemType.prototype={phoneNumber:1,galContact:2,personalContact:3,defaultContactsFolder:4,personaContact:5};CallerIdItemType.registerEnum("CallerIdItemType",!1);var DaysOfWeek=function(){};DaysOfWeek.prototype={none:0,sunday:1,monday:2,tuesday:4,wednesday:8,thursday:16,friday:32,weekdays:62,saturday:64,weekendDays:65,allDays:127};DaysOfWeek.registerEnum("DaysOfWeek",!1);var TimeOfDayType=function(){};TimeOfDayType.prototype={workingHours:1,nonWorkingHours:2,customPeriod:3};TimeOfDayType.registerEnum("TimeOfDayType",!1);function ComboBoxSizeMoniter(n,t,i){var r=document.createElement("DIV");r.className=CssClasses.invisibleDiv;n.appendChild(r);this.$1m_0=ComboBox.createInstance("");this.$1m_0.addToDOMElement(r);this.$1m_0.set_autoSize(!0);this.$17_0=document.createElement("DIV");this.$17_0.style.position="absolute";this.$17_0.style.whiteSpace="nowrap";r.appendChild(this.$17_0);this.$17_0.innerHTML=i;this.$18_0=t}ComboBoxSizeMoniter.prototype={$1m_0:null,$17_0:null,$18_0:null,start:function(){ControlSizeMonitor.registerControl(this.$1m_0.get_element(),this.$18_0);ControlSizeMonitor.registerControl(this.$17_0,this.$18_0);$addHandler(window,"resize",this.$18_0);this.$18_0(null)},end:function(){ControlSizeMonitor.unregisterControl(this.$1m_0.get_element(),this.$18_0);ControlSizeMonitor.unregisterControl(this.$17_0,this.$18_0);$removeHandler(window,"resize",this.$18_0)},get_width:function(){return this.$1m_0.get_width()+this.$17_0.offsetWidth}};function CallTransferViewModel(){CallTransferViewModel.initializeBase(this);PopupFormViewModel.prototype.initialize.call(this);this.setValue("PhoneNumberSelected",!0)}function DateRangeControl(n){this.$$d_$5i_4=Function.createDelegate(this,this.$5i_4);DateRangeControl.initializeBase(this,[n])}DateRangeControl.prototype={get_BeforeDatePicker:function(){return this.$Q_4},set_BeforeDatePicker:function(n){this.$Q_4=n;return n},$Q_4:null,get_AfterDatePicker:function(){return this.$P_4},set_AfterDatePicker:function(n){this.$P_4=n;return n},$P_4:null,get_BeforeDateCheckBox:function(){return this.$e_4},set_BeforeDateCheckBox:function(n){this.$e_4=n;return n},$e_4:null,get_AfterDateCheckBox:function(){return this.$d_4},set_AfterDateCheckBox:function(n){this.$d_4=n;return n},$d_4:null,initialize:function(){this.$Q_4.set_enabled(!1);this.$P_4.set_enabled(!1);this.$Q_4.set_selectedValue(new Date(this.$P_4.get_selectedValue().getTime()+864e5));$addHandler(this.$e_4,"click",this.$$d_$5i_4);$addHandler(this.$d_4,"click",this.$$d_$5i_4)},dispose:function(){$removeHandler(this.$e_4,"click",this.$$d_$5i_4);$removeHandler(this.$d_4,"click",this.$$d_$5i_4);this.$Q_4&&this.$Q_4.dispose();this.$P_4&&this.$P_4.dispose();EcpControl.prototype.dispose.call(this)},$5i_4:function(n){var t=n.target;t===this.$e_4?this.$Q_4.set_enabled(t.checked):t===this.$d_4&&this.$P_4.set_enabled(t.checked)},$2B_4:function(n){this.get_setErrorsWarningsDelegate()&&this.get_setErrorsWarningsDelegate()(n,!0)},unSelectAll:function(){if(this.$e_4.checked){this.$e_4.checked=!1;this.$Q_4.set_enabled(!1)}if(this.$d_4.checked){this.$d_4.checked=!1;this.$P_4.set_enabled(!1)}},get_value:function(){var n={};this.$e_4.checked&&(n.BeforeDate=new Identity(this.$Q_4.get_value(),this.$Q_4.get_selectedDateText()));this.$d_4.checked&&(n.AfterDate=new Identity(this.$P_4.get_value(),this.$P_4.get_selectedDateText()));return n},set_value:function(n){var t=n;if(t.BeforeDate){this.$e_4.checked=!0;this.$Q_4.set_enabled(!0);this.$Q_4.set_value(t.BeforeDate.RawIdentity)}else{this.$e_4.checked=!1;this.$Q_4.set_enabled(!1)}if(t.AfterDate){this.$d_4.checked=!0;this.$P_4.set_enabled(!0);this.$P_4.set_value(t.AfterDate.RawIdentity)}else{this.$d_4.checked=!1;this.$P_4.set_enabled(!1)}return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null,validate:function(){this.$2B_4(null);if(this.$e_4.checked&&this.$d_4.checked&&this.$Q_4.get_selectedValue()<=this.$P_4.get_selectedValue()){this.$2B_4([Strings.get_InvalidDateRange()]);return!1}return!0}};function DLPPicker(n){DLPPicker.initializeBase(this,[n])}DLPPicker.prototype={get_ECPCollectionEditor:function(){return this.$31_4},set_ECPCollectionEditor:function(n){this.$31_4=n;return n},$31_4:null,get_value:function(){return this.$31_4.get_fullValue()},set_value:function(n){this.$31_4.set_value(n);return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null};function EnhancedEnumPicker(n){this.$$d_$5a_5=Function.createDelegate(this,this.$5a_5);this.$$d_$5b_5=Function.createDelegate(this,this.$5b_5);this.$$d_$5Y_5=Function.createDelegate(this,this.$5Y_5);this.$$d_$5Z_5=Function.createDelegate(this,this.$5Z_5);EnhancedEnumPicker.initializeBase(this,[n]);this.$1n_5={};this.$2q_5={}}EnhancedEnumPicker.prototype={servicePath:null,noSelectionWarningText:null,$1n_5:null,$2q_5:null,$1X_5:null,$2X_5:0,$1V_5:null,$3s_5:null,$2T_5:null,get_value:function(){var t={};var n={};var i=this.$B_4.selectedIndex;i!==-1&&(n.DisplayText=this.$B_4.options[i].text);n.Value=this.$B_4.value;t.Selected=n;return t},set_value:function(n){if(n){var i=null;this.$1X_5=n.Selected;this.$3N_5(!1);if(this.$1n_5[this.servicePath]){i=this.$1n_5[this.servicePath];this.reCreateDropDownList(i,this.$1X_5,!1);var t=this.$2q_5[this.servicePath];if(t&&t.length>0){var r=this;window.setTimeout(function(){r.get_setErrorsWarningsDelegate()(t,!1)},0)}}else{this.get_enableOkButtonDelegate()(!1);this.$3N_5(!0);this.getEnumPickerValue(this.$$d_$5Z_5,this.$$d_$5Y_5)}}return n},initialize:function(){EcpControl.prototype.initialize.call(this);this.$1V_5=document.createElement("div");this.$1V_5.className="hw100";this.get_element().appendChild(this.$1V_5)},getEnumPickerValue:function(n,t){var i=new WebServiceMethod;i.add_Succeeded(this.$$d_$5b_5);i.add_Failed(this.$$d_$5a_5);i.set_MethodName("GetList");i.set_ServiceUrl(EcpUrl.get_ecpFullUrl()+this.servicePath);i.set_ParameterNames(7);i.invokeWithArgs([null,null],null);this.$3s_5=n;this.$2T_5=t},$5Z_5:function(n,t){this.$3N_5(!1);if(n&&n.length>0){t&&t.length>0&&this.get_setErrorsWarningsDelegate()(t,!1);this.$1n_5[this.servicePath]=n;this.$2q_5[this.servicePath]=t;this.get_enableOkButtonDelegate()(!0);this.reCreateDropDownList(n,this.$1X_5,!1)}else{var u=1+(t?t.length:0);var r=new Array(u);r[0]=this.noSelectionWarningText;if(t)for(var i=0;i<t.length;i++)r[i+1]=t[i];this.get_setErrorsWarningsDelegate()(r,!1);this.$1n_5[this.servicePath]=null;this.$2q_5[this.servicePath]=null;this.reCreateDropDownList([],null,!1)}},$5Y_5:function(n){n&&n.length>0&&this.get_setErrorsWarningsDelegate()(n,!0);this.$3N_5(!1);this.$1n_5[this.servicePath]=null;this.reCreateDropDownList([],null,!1)},$5a_5:function(n,t){if(this.$2T_5){this.$2T_5([t.get_error().get_message()]);t.set_handled(!0)}},$5b_5:function(n,t){var i=t.get_results();if(i.ErrorRecords.length>0){if(this.$2T_5){var r=EcpUtil.retrieveErrorMsgs(i);this.$2T_5(r)}}else this.$3s_5&&this.$3s_5(t.get_results().Output,i.Warnings)},$3N_5:function(n){_DomElement.toggelCssClass(this.$B_4,n,CssClasses.hiddenCSS);_DomElement.toggelCssClass(this.$y_4,n,CssClasses.hiddenAlways);_DomElement.toggelCssClass(this.$1V_5,!n,CssClasses.hiddenCSS);if(n){this.$1V_5.style.width=this.get_element().offsetWidth+"px";var t=this;this.$2X_5=window.setTimeout(function(){t.$1V_5.innerHTML=String.format(EnhancedEnumPicker.$4t,Strings.get_Loading());t.$2X_5=0},GlobalVariables.progressDelay)}else{if(this.$2X_5){window.clearTimeout(this.$2X_5);this.$2X_5=0}this.$1V_5.innerHTML=""}}};function EntryEditors(){}EntryEditors.getEditor=function(n){return EntryEditors.$3n[n]};EntryEditors.register=function(n,t){if(!n)throw Error.argumentNull();EntryEditors.$3n[n]=t};function EnumPicker(n){EnumPicker.initializeBase(this,[n]);this.$1L_4=document.createElement("DIV");this.$1L_4.style.display="none";this.get_element().appendChild(this.$1L_4)}EnumPicker.prototype={$4r_4:!1,$1L_4:null,get_DropDownList:function(){return this.$B_4},set_DropDownList:function(n){this.$B_4=n;return n},$B_4:null,get_DescriptionLabel:function(){return this.$y_4},set_DescriptionLabel:function(n){this.$y_4=n;return n},$y_4:null,get_description:function(){return this.$y_4.innerHTML.substr(0,this.$y_4.innerHTML.length-6)},set_description:function(n){this.$y_4.innerHTML=n?EcpUtil.htmlEncode(n)+"<br />":"";return n},reCreateDropDownList:function(n,t,i){this.$4r_4=i;if(i){for(var r=new Sys.StringBuilder,y=t.Value||new Array(0),u=0;u<n.length;u++){var l="EnumPicker_Chk_"+u;r.append("<input type='checkbox' value='");r.append(EcpUtil.htmlEncode(n[u].Value));r.append("' id='");r.append(l);Array.contains(y,n[u].Value)&&r.append("' checked='true");r.append("'/><label for='");r.append(l);r.append("'>");r.append(EcpUtil.htmlEncode(n[u].DisplayText));r.append("</label><br/>")}this.$1L_4.innerHTML=r.toString();this.$B_4.style.display="none";this.$1L_4.style.display=""}else{this.$B_4.style.display="";this.$1L_4.style.display="none";var s=!0;var f=this.$B_4.options.length;if(t&&t.Value){for(var a=!0,h=0;h<n.length;h++)if(n[h].Value===t.Value){a=!1;break}a&&Array.insert(n,0,t)}if(f>0&&f===n.length){for(var e=0;e<f;e++)if(this.$B_4.options[e].value!==n[e].Value){s=!1;break}}else s=!1;if(!s){for(var v=0;v<f;v++)this.$B_4.remove(0);for(var o=0;o<n.length;o++){var c=document.createElement("OPTION");c.value=n[o].Value;c.text=n[o].DisplayText;EcpUtil.appendOption(this.$B_4,c)}}this.$5z_4();if(n.length>0&&!i){t&&t.Value||(t=n[0]);this.$B_4.value=t.Value}}},$5z_4:function(){this.$y_4.style.width="1px";this.$B_4.style.width="";var i=this.$B_4.offsetWidth<this.get_element().offsetWidth;var t=this.$B_4.offsetWidth>this.get_element().offsetWidth;if(i||t){this.$B_4.style.width=this.get_element().offsetWidth+"px";if(t)for(var r=this.$B_4.options.length,n=0;n<r;n++)this.$B_4.options[n].title=this.$B_4.options[n].text}this.$y_4.style.width=this.$B_4.offsetWidth+"px"},addAriaAttribute:function(){var n=$get(this.get_element().id+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLab(this.$B_4,n);AriaUtil.addAriaAttrToControlWithLabelID(this.$B_4,AriaUtil.getFvaReaderSpanId(this.get_element()))},get_value:function(){var n={};n.Selected={};if(this.$4r_4){for(var r=new Array(0),i=this.$1L_4.getElementsByTagName("INPUT"),t=0;t<i.length;t++)i[t].checked&&Array.add(r,i[t].value);n.Selected.Value=r}else n.Selected.Value=this.$B_4.value;return n},set_value:function(n){n&&this.reCreateDropDownList(n.Options,n.Selected,n.IsMultiSelect);return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null,dispose:function(){EcpControl.prototype.dispose.call(this)}};function FolderPicker(n){FolderPicker.initializeBase(this,[n]);this.set_newButtonText(Strings.get_NewFolder());this.set_newButtonVisible(!0);this.set_legacyErrorString(Strings.get_LegacyFolderError())}FolderPicker.prototype={get_className:function(){return"FolderPicker"},validateInput:function(n){var t=null;n&&n.trim().length?(n.charAt(0)===" "||n.charAt(n.length-1)===" ")&&(t=Strings.get_LeadingTrailingSpaceError()):t=Strings.get_EmptyValueError();return t},getInitialSelection:function(n){if(n)for(var t=0;t<n.Children.length;t++){var i=n.Children[t];if(i.IsInboxFolder)return new Identity(i.ID,i.Name)}return null}};function FolderPickerTreeSource(n){FolderPickerTreeSource.initializeBase(this,["~/RulesEditor/MailboxFolders.svc"]);this.$4k_1=n}FolderPickerTreeSource.prototype={$4k_1:0,getRootParameter:function(){var n={};n.FolderPickerType=this.$4k_1;return[n,null]},commitNewNodeParameter:function(n,t){var i={};i.Name=n;i.Parent=":"+t;return[i]}};function RulesFolderPicker(){RulesFolderPicker.initializeBase(this,[new FolderPickerTreeSource(0)])}function VoiceMailFolderPicker(){VoiceMailFolderPicker.initializeBase(this,[new FolderPickerTreeSource(1)]);this.set_newButtonVisible(!1)}function FormletControlBase(n){FormletControlBase.initializeBase(this,[n])}FormletControlBase.prototype={$32_4:null,get_EditorParameter:function(){return this.$33_4},set_EditorParameter:function(n){this.$33_4=n;return n},$33_4:null,initialize:function(){EcpControl.prototype.initialize.call(this);var n=document.createElement("DIV");this.get_element().appendChild(n);n.className=CssClasses.get_ruleParameterEditor();var t=document.createElement("SPAN");n.appendChild(t);this.$32_4=$create(DataBinder.getPropertyValue(window.self,this.$33_4.EditorType),{Parameter:this.$33_4},null,null,t);this.$32_4.delimeterString=","},dispose:function(){EcpControl.prototype.dispose.call(this)},get_value:function(){return this.$32_4.$A_3},set_value:function(n){this.$32_4.set_value(n);return n}};function GroupNamingPolicyEditor(n){this.$$d_$3Z_4=Function.createDelegate(this,this.$3Z_4);this.$$d_onButtonClicked=Function.createDelegate(this,this.onButtonClicked);this.$$d_$4a_4=Function.createDelegate(this,this.$4a_4);this.$$d_$4Z_4=Function.createDelegate(this,this.$4Z_4);this.prefixEditors=new Array(0);this.$M_4=new Array(0);GroupNamingPolicyEditor.initializeBase(this,[n])}GroupNamingPolicyEditor.$1l=function(n,t){for(var i=0;i<t.length;i++){n.append(EcpUtil.htmlEncode(t[i].DisplayText));n.append("<br/>")}};GroupNamingPolicyEditor.prototype={$X_4:null,$x_4:null,$8_4:null,$G_4:null,$l_4:null,$1q_4:null,$2O_4:null,$4A_4:null,$1h_4:null,$c_4:null,$4K_4:null,$1i_4:null,$j_4:null,$2c_4:null,$3D_4:null,$2b_4:null,$49_4:0,$36_4:null,$1j_4:null,$1k_4:null,$1Y_4:null,$2Y_4:0,get_GroupNameLocString:function(){return this.$36_4},set_GroupNameLocString:function(n){this.$36_4=n;return n},get_AllPrefixes:function(){return this.$1j_4},set_AllPrefixes:function(n){this.$1j_4=n;return n},get_AllSuffixes:function(){return this.$1k_4},set_AllSuffixes:function(n){this.$1k_4=n;return n},get_MaxLength:function(){return this.$2Y_4},set_MaxLength:function(n){this.$2Y_4=n;return n},get_ParametersPanel:function(){return this.$1Y_4},set_ParametersPanel:function(n){this.$1Y_4=n;return n},get_value:function(){var n={};var t=this.$4W_4(this.$1j_4,this.prefixEditors);var i=this.$4W_4(this.$1k_4,this.$M_4);n.GroupNamingPolicy=EcpUtil.isNullOrBlank(t)&&EcpUtil.isNullOrBlank(i)?"":(t+"<GroupName>"+i).trim();return n},set_value:function(n){var t=n;if(n){this.$4U_4(this.prefixEditors,this.$4A_4,this.$1h_4);this.$4U_4(this.$M_4,this.$4K_4,this.$1i_4);this.prefixEditors=new Array(0);this.$M_4=new Array(0);this.$4X_4(this.$1j_4,this.prefixEditors,t.GroupNamingPolicyPrefixElements,this.$$d_$4Z_4);this.$4X_4(this.$1k_4,this.$M_4,t.GroupNamingPolicySuffixElements,this.$$d_$4a_4)}this.$57_4(this.$2O_4);this.$4N_4();this.setEnabled(this.get_enabledInternal());return n},$4N_4:function(){this.$57_4(this.$3D_4);var t=this.$4l_4();var n=EcpUtil.isNullOrBlank(t);EcpUtil.showElement(this.$2c_4,!n);EcpUtil.showElement(this.$2b_4,!n)},$4U_4:function(n,t,i){for(var r=0;r<n.length;r++)n[r].dispose();RuleEditorUtil.removeSiblings(t,i)},$4X_4:function(n,t,i,r){if(n&&n.length>0){var e=i;if(!_Object.isNullOrUndefined(e))for(var o=0;o<e.length;o++){var u=e[o];var f=null;var s={};if(u.charAt(0)==="<"&&u.length>1&&u.charAt(1)!=="<"){f=n[0];s[f.Name]=u.substr(1,u.length-2)}else{f=n[1];s[f.Name]=this.$69_4(u)}var h=r(f,s);Array.add(t,h)}if(!t.length){var c=r(null,{});Array.add(t,c)}}},initialize:function(){EcpControl.prototype.initialize.call(this);this.initParametersPanel();$addHandler(this.get_element(),"click",this.$$d_onButtonClicked);var n=new Sys.StringBuilder;GroupNamingPolicyEditor.$1l(n,this.$1j_4);GroupNamingPolicyEditor.$1l(n,this.$1k_4);this.$X_4=new ComboBoxSizeMoniter(this.get_element(),this.$$d_$3Z_4,n.toString());this.$X_4.start();this.$c_4.tabIndex=0},dispose:function(){this.$X_4.end();$removeHandler(this.get_element(),"click",this.$$d_onButtonClicked);EcpControl.prototype.dispose.call(this)},onButtonClicked:function(n){var i=n.target;if(i===this.$c_4)Array.add(this.prefixEditors,this.$4Z_4(null,{}));else if(i===this.$j_4)Array.add(this.$M_4,this.$4a_4(null,{}));else{var r=RulePhraseEditor.getClickedLink(i);if(r){var t=$find(r.parentNode.parentNode.id);if(Sys.UI.DomElement.containsCssClass(t.get_element(),CssClasses.groupNamingPolicyPrefix)){this.$27_4(this.prefixEditors,t);Array.remove(this.prefixEditors,t);EcpUtil.safeFocus(this.$c_4)}else if(Sys.UI.DomElement.containsCssClass(t.get_element(),CssClasses.groupNamingPolicySuffix)){this.$27_4(this.$M_4,t);Array.remove(this.$M_4,t);EcpUtil.safeFocus(this.$j_4)}var u=t.get_element();t.dispose();u.parentNode.removeChild(u);this.$4Q_4();this.$4N_4()}}},validate:function(n){for(var r=!0,u=0;u<this.prefixEditors.length;u++){var t=this.prefixEditors[u];if(t.get_hasSelection()){var e=t.get_value()[t.$3_3.Name];t.validateParameterEditors(!0)||(r=!1)}}for(var f=0;f<this.$M_4.length;f++){var i=this.$M_4[f];if(i.get_hasSelection()){var o=i.get_value()[i.$3_3.Name];i.validateParameterEditors(!0)||(r=!1)}}return r},setControlInError:function(n,t){},initParametersPanel:function(){this.$8_4=document.createElement("TABLE");this.$8_4.setAttribute("cellPadding",0);this.$8_4.setAttribute("cellSpacing",0);this.$8_4.className=CssClasses.ruleParametersTable;this.$1Y_4.appendChild(this.$8_4);var n=document.createElement("COLGROUP");this.$8_4.appendChild(n);n.appendChild(document.createElement("COL"));this.$x_4=document.createElement("COL");n.appendChild(this.$x_4);n.appendChild(document.createElement("COL"));if(EcpUtil.isSafari()){this.$G_4=this.$8_4.insertRow(-1);this.$G_4.style.height="0px";this.$G_4.insertCell(-1);this.$G_4.insertCell(-1);this.$G_4.insertCell(-1)}this.$1q_4=document.createElement("TD");this.$1q_4.colSpan=3;this.$1q_4.className="GroupNamingPolicyCurrentPolicy";EcpUtil.setInnerText(this.$1q_4,Strings.get_CurrentPolicyCaption());this.$8_4.insertRow(-1).appendChild(this.$1q_4);var i=document.createElement("TD");i.colSpan=2;this.$2O_4=document.createElement("div");this.$2O_4.className=CssClasses.groupNamingPolicyView+" GroupNamingPolicyCurrentPolicy";i.appendChild(this.$2O_4);var e=this.$8_4.insertRow(-1);e.insertCell(-1);e.appendChild(i);this.$l_4=document.createElement("TD");this.$l_4.className=CssClasses.phrasesLabel;this.$l_4.colSpan=3;EcpUtil.setInnerText(this.$l_4,Strings.get_GroupNamingPolicyCaption());this.$8_4.insertRow(-1).appendChild(this.$l_4);var c=RuleEditor.createEditorLabelCell(Strings.get_GroupNamingPolicyEditorPrefixLabel(),null,"PrefixEditor",3);this.$4A_4=this.$8_4.insertRow(-1);this.$4A_4.appendChild(c);var r=document.createElement("TD");r.colSpan=2;this.$c_4=document.createElement("button");this.$c_4.className=CssClasses.messageTypeLaunchButton;EcpUtil.setInnerText(this.$c_4,Strings.get_AddGroupNamingPolicyElementButtonText());this.$c_4.id="addPrefixButton";this.$c_4.setAttribute("onclick",GlobalVariables.doNothingScript);r.appendChild(this.$c_4);this.$1h_4=this.$8_4.insertRow(-1);this.$1h_4.insertCell(-1);this.$1h_4.appendChild(r);var l=RuleEditor.createEditorLabelCell(Strings.get_GroupNamingPolicyEditorSuffixLabel(),null,"SuffixEditor",3);this.$4K_4=this.$8_4.insertRow(-1);this.$4K_4.appendChild(l);var u=document.createElement("TD");u.colSpan=2;this.$j_4=document.createElement("button");this.$j_4.className=CssClasses.messageTypeLaunchButton;EcpUtil.setInnerText(this.$j_4,Strings.get_AddGroupNamingPolicyElementButtonText());this.$j_4.id="addSuffixButton";this.$j_4.setAttribute("onclick",GlobalVariables.doNothingScript);u.appendChild(this.$j_4);this.$1i_4=this.$8_4.insertRow(-1);this.$1i_4.insertCell(-1);this.$1i_4.appendChild(u);var t=document.createElement("TD");t.className=CssClasses.phrasesLabel;t.colSpan=3;EcpUtil.setInnerText(t,Strings.get_GroupNamingPolicyPreviewLabel());var a=this.$8_4.insertRow(-1);a.appendChild(t);this.$2c_4=document.createElement("TD");this.$2c_4.colSpan=3;EcpUtil.setInnerText(this.$2c_4,Strings.get_GroupNamingPolicyPreviewDescriptionHeader());var o=this.$8_4.insertRow(-1);o.insertCell(-1);o.appendChild(this.$2c_4);var f=document.createElement("TD");f.colSpan=2;this.$3D_4=document.createElement("div");this.$3D_4.className=CssClasses.groupNamingPolicyView;f.appendChild(this.$3D_4);var s=this.$8_4.insertRow(-1);s.insertCell(-1);s.appendChild(f);this.$2b_4=document.createElement("TD");this.$2b_4.colSpan=3;EcpUtil.setInnerText(this.$2b_4,Strings.GroupNamingPolicyPreviewDescriptionFooter("<"+this.$36_4+">"));var h=this.$8_4.insertRow(-1);h.insertCell(-1);h.appendChild(this.$2b_4)},isRulePhraseSpecified:function(n,t){if(t.Parameters&&t.Parameters.length>0)for(var i=0;i<t.Parameters.length;i++)if(!_Object.isNullOrUndefined(n[t.Parameters[i].Name]))return!0;return!1},$27_4:function(n,t){n.length>1&&(t===n[0]?t.get_element().parentNode.removeChild(t.get_element().nextSibling):t.get_element().parentNode.removeChild(t.get_element().previousSibling))},$3Z_4:function(n){var t=this.$X_4.get_width()+90;var i=this.get_element().offsetWidth*75/100;t>i&&(t=i);this.$x_4.style.width=t+"px";EcpUtil.isSafari()&&this.$G_4&&(this.$G_4.cells[1].style.width=t+"px")},$4m_4:function(n){for(var i=new Sys.StringBuilder,t=0;t<n.length;t++){var r=n[t].get_displayTexts();if(!_Object.isNullOrUndefined(r)&&!_Object.isNullOrUndefined(n[t].$3_3))if(n[t].$3_3.Name==="Attribute"){i.append("<");i.append(r[n[t].$3_3.Name]);i.append(">")}else{var u=r[n[t].$3_3.Name];i.append(u)}}return i.toString()},$5U_4:function(n){return n.replace(new RegExp("<","g"),"<<").replace(new RegExp(">","g"),">>")},$69_4:function(n){return n.replace(new RegExp("<<","g"),"<").replace(new RegExp(">>","g"),">")},$4l_4:function(){var n=this.$4m_4(this.prefixEditors);var t=this.$4m_4(this.$M_4);var i="";EcpUtil.isNullOrBlank(n)&&EcpUtil.isNullOrBlank(t)||(i=n+"<"+this.$36_4+">"+t);return i},$57_4:function(n){var t=this.$4l_4();EcpUtil.isNullOrBlank(t)?EcpUtil.setInnerText(n,Strings.get_NoNamingPolicySetup()):n.innerHTML=EcpUtil.reserveSpace(EcpUtil.htmlEncode(t))},$1p_4:function(n,t,i,r){var u=document.createElement("TR");u.id=r+"_"+this.$49_4++;i.parentNode.insertBefore(u,i);var f=$create(RulePhraseEditor,{Phrase:n,AllPhrases:t,SimpleMode:!1},null,null,u);var e=this;f.add_valueChanged(function(n,t){e.$4Q_4()});return f},$4Q_4:function(){for(var u=0;u<this.prefixEditors.length;++u){var n=this.prefixEditors[0];if(n.get_hasSelection()){var i=n.get_value()[n.$3_3.Name];if(!EcpUtil.isNullOrBlank(i)&&i.startsWith(" ")){i=i.trimStart();var f=n.get_value();f[n.$3_3.Name]=i;n.set_value(f);break}}}for(var e=0;e<this.$M_4.length;++e){var t=this.$M_4[this.$M_4.length-1];if(t.get_hasSelection()){var r=t.get_value()[t.$3_3.Name];if(!EcpUtil.isNullOrBlank(r)&&r.endsWith(" ")){r=r.trimEnd();var o=t.get_value();o[t.$3_3.Name]=r;t.set_value(o);break}}}this.$4N_4()},$1o_4:function(n,t){var i=document.createElement("TR");var r=document.createElement("TD");r.innerHTML=t;i.appendChild(document.createElement("TD"));i.appendChild(r);n.parentNode.insertBefore(i,n)},$4Z_4:function(n,t){this.prefixEditors.length>0&&this.$1o_4(this.$1h_4,Strings.get_FollowedByColon());var i=this.$1p_4(n,this.$1j_4,this.$1h_4,"PrefixEditor");i.set_value(t);i.addCssClass(CssClasses.groupNamingPolicyPrefix);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),"PrefixEditor"+AriaUtil.associatedLabelSuffix);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),this.get_id()+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLabelID(i.$0_3.get_element(),AriaUtil.getFvaReaderSpanId(i.$0_3.get_element()));return i},$4a_4:function(n,t){this.$M_4.length>0&&this.$1o_4(this.$1i_4,Strings.get_FollowedByColon());var i=this.$1p_4(n,this.$1k_4,this.$1i_4,"SuffixEditor");i.set_value(t);i.addCssClass(CssClasses.groupNamingPolicySuffix);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),"SuffixEditor"+AriaUtil.associatedLabelSuffix);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),this.get_id()+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLabelID(i.$0_3.get_element(),AriaUtil.getFvaReaderSpanId(i.$0_3.get_element()));return i},$4W_4:function(n,t){if(!t)return"";for(var u=new Sys.StringBuilder,f=0;f<t.length;f++)for(var r=t[f],i=0;i<r.$2_3.length;i++){var o=r.$2_3[i];if(!_Object.isNullOrUndefined(r.$2_3[i].$A_3)){var e=r.$2_3[i].$A_3.toString();o.$1_3.Name==="Attribute"?u.append("<"+e+">"):u.append(this.$5U_4(e))}}return u.toString()},setEnabled:function(n){ContainerControl.prototype.setEnabled.call(this,n);this.$c_4&&_DomElement.toggelCssClass(this.$c_4,!n,CssClasses.hiddenCSS);this.$j_4&&_DomElement.toggelCssClass(this.$j_4,!n,CssClasses.hiddenCSS);for(var r=this.prefixEditors,f=r.length,t=0;t<f;++t){var e=r[t];e.set_disabled(!n)}for(var u=this.$M_4,o=u.length,i=0;i<o;++i){var s=u[i];s.set_disabled(!n)}if(EcpUtil.isIE()){this.$54_4(this.$1q_4);this.$54_4(this.$2O_4)}},$54_4:function(n){if(n)do{ControlHelper.enableDomElement(n,!0);n=n.parentNode}while(n!==this.get_element().parentNode)}};function IncidentReportContentEditControl(n){this.$$d_$5o_4=Function.createDelegate(this,this.$5o_4);IncidentReportContentEditControl.initializeBase(this,[n])}IncidentReportContentEditControl.prototype={$3e_4:null,$w_4:null,$1U_4:null,get_CheckboxListID:function(){return this.$3e_4},set_CheckboxListID:function(n){this.$3e_4=n;return n},initialize:function(){EcpControl.prototype.initialize.call(this);this.$1U_4=document.createElement("A");this.$1U_4.href="#";$addHandler(this.$1U_4,EventNames.click,this.$$d_$5o_4);this.$w_4=EcpControl.fromElement($get(this.$3e_4));this.get_element().insertBefore(this.$1U_4,this.$w_4.get_element())},dispose:function(){EcpControl.prototype.dispose.call(this);$removeHandler(this.$1U_4,EventNames.click,this.$$d_$5o_4)},$53_4:function(){this.$1U_4.innerText=this.$w_4.isAllSelected()?Strings.get_IncidentReportDeselectAll():Strings.get_IncidentReportSelectAll()},$5o_4:function(n){this.$w_4.isAllSelected()?this.$w_4.unselectAll():this.$w_4.selectAll();this.$53_4()},get_value:function(){return EcpUtil.isNullOrEmpty(this.$w_4.get_ValueString())?null:this.$w_4.get_ValueString()},set_value:function(n){_Object.isNullOrUndefined(n)||this.$w_4.set_ValueString(n.toString());this.$53_4();return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null};function InlineEditor(n){this.$$d_$5h_4=Function.createDelegate(this,this.$5h_4);this.$$d_$5g_4=Function.createDelegate(this,this.$5g_4);this.$$d_$5f_4=Function.createDelegate(this,this.$5f_4);this.$2Q_4=2;InlineEditor.initializeBase(this,[n]);this.$43_4=this.$$d_$5f_4;this.$42_4=this.$$d_$5g_4;this.$44_4=this.$$d_$5h_4;Array.add(GlobalVariables.preventFireDefaultButton,this.get_element().id)}InlineEditor.prototype={$43_4:null,$42_4:null,$44_4:null,initialize:function(){EcpControl.prototype.initialize.call(this);if(this.$C_4){this.$C_4.add_onAfterLabelEdit(this.$42_4);this.$C_4.add_onNewInlineItemAdded(this.$43_4);this.$C_4.add_warningPanelDismissed(this.$44_4)}},editCommand:function(){var n=this;window.setTimeout(function(){n.$C_4.editSelectedElement()},0)},$5h_4:function(n,t){this.get_enableOkButtonDelegate()&&this.$5_4(!0)},$5f_4:function(n,t){this.$4s_4(t)},$5g_4:function(n,t){this.$4s_4(t)},$4s_4:function(n){if(this.get_ValidationExpression())if(this.get_ValidationExpression()(n.get_newValue()))this.get_enableOkButtonDelegate()&&this.$5_4(!0);else{n.set_cancel(!0);n.cancelReason=this.$3T_4;this.get_enableOkButtonDelegate()&&this.$5_4(!1)}},get_ListView:function(){return this.$C_4},set_ListView:function(n){this.$C_4=n;return n},$C_4:null,get_DataSource:function(){return this.$1s_4},set_DataSource:function(n){this.$1s_4=n;return n},$1s_4:null,get_DuplicateHandlingType:function(){return this.$2Q_4},set_DuplicateHandlingType:function(n){this.$2Q_4=n;return n},get_maxLength:function(){return this.$C_4.get_InlineEditMaxLength()},set_maxLength:function(n){this.$C_4.set_InlineEditMaxLength(n);return n},restoreStatus:function(){this.$C_4.raiseOnCompleteInlineEdition(!1);this.$C_4.hideWarningPanel();this.$C_4.get_InputTextBox().set_inputText("");this.$C_4.get_InputTextBox().get_inputElement().blur()},dispose:function(){if(this.$C_4){this.$C_4.remove_onAfterLabelEdit(this.$42_4);this.$C_4.remove_onNewInlineItemAdded(this.$43_4);this.$C_4.remove_warningPanelDismissed(this.$44_4)}Array.remove(GlobalVariables.preventFireDefaultButton,this.get_element().id);EcpControl.prototype.dispose.call(this)},setEnabled:function(n){this.$C_4&&this.$C_4.set_enabled(n)},get_ValidationExpression:function(){return this.$58_4},set_ValidationExpression:function(n){this.$58_4=n;return n},$58_4:null,get_ValidationErrorMessage:function(){return this.$3T_4},set_ValidationErrorMessage:function(n){this.$3T_4=n;return n},$3T_4:null,get_value:function(){var n;switch(this.$2Q_4){case 1:n=EcpUtil.removeDuplicate(this.$1s_4.getList());break;case 0:n=EcpUtil.removeDuplicateCaseInsensitive(this.$1s_4.getList());break;case 2:default:var t=[];Array.addRange(t,this.$1s_4.getList());n=t;break}return n},set_value:function(n){if(n&&Array.isInstanceOfType(n)){this.$1s_4.setList(n,!0);this.$C_4.get_items().length>0&&this.$C_4.get_items()[0].set_selected(!0)}return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null,isInError:function(){return this.$C_4.get_isInError()}};function InboxRuleEditor(n){this.$$d_$4w_5=Function.createDelegate(this,this.$4w_5);this.$$d_onWhatThisMeanLinkClicked=Function.createDelegate(this,this.onWhatThisMeanLinkClicked);InboxRuleEditor.initializeBase(this,[n])}InboxRuleEditor.prototype={$1w_5:null,$2E_5:null,$7_5:null,$4P_5:null,$3P_5:!1,$4q_5:!1,$22_5:null,$2i_5:null,$3t_5:null,get_MailMessageObject:function(){return this.$22_5},set_MailMessageObject:function(n){this.$22_5=n;return n},get_TemplatePhraseNames:function(){return this.$2i_5},set_TemplatePhraseNames:function(n){this.$2i_5=n;return n},get_HrefForStopProcessingRules:function(){return this.$3t_5},set_HrefForStopProcessingRules:function(n){this.$3t_5=n;return n},get_value:function(){var n=RuleEditor.prototype.get_value.call(this);this.originalValue.StopProcessingRules!==this.$7_5.checked&&(n.StopProcessingRules=this.$7_5.checked);return n},set_value:function(n){this.$7_5.checked=_Object.isNullOrUndefined(n.StopProcessingRules)?!1:n.StopProcessingRules;this.isSimpleMode=this.$7_5.checked;RuleEditor.prototype.set_value.call(this,n);if(this.isSimpleMode&&this.$7_5.checked&&this.actionEditors.length===1&&!this.actionEditors[0].$0_3.get_value()){this.isSimpleMode=!1;this.switchMode()}return n},initialize:function(){RuleEditor.prototype.initialize.call(this);if(!this.$J_4)if(this.$22_5){for(var i=0;i<this.conditionEditors.length;i++)this.conditionEditors[i].dispose();RuleEditorUtil.removeSiblings(this.conditionLabelRow,this.addConditionButtonRow);this.conditionEditors=new Array(0);for(var r=0;r<this.$4_4.length;r++){var o=this.$4_4[r];if(RuleEditor.$20(this.$22_5,o)){var s=this.$5K_5(o,this.$22_5);s.set_isRemovable(!1);Array.add(this.conditionEditors,s)}}var u=document.createElement("TR");this.addConditionButtonRow.parentNode.insertBefore(u,this.addConditionButtonRow);u.insertCell(-1);this.$1w_5=document.createElement("TD");this.$1w_5.colSpan=2;this.$1w_5.className=CssClasses.get_withInvalidValue();this.$1w_5.innerHTML=String.format('<div id="{0}_errorDiv"><img class="CommonSprite Error floatLeft" src="{2}" alt="{3}" title="{3}"/><div class="alertDivContent">{1}</div></div>',"preCannedEditors",Strings.get_NoConditionErrorText(),EcpUtil.getSpriteImageSrc(),Strings.get_Error());u.appendChild(this.$1w_5);this.$4J_5(!1);if(this.conditionEditors.length>0)this.$4q_5=!0;else{Array.add(this.conditionEditors,this.createConditionEditor(null,{}));this.conditionEditors[0].set_isRemovable(!1)}this.$D_4[0].hasPermission&&this.actionEditors[0].setValueAndSupressEditorPopup(this.$D_4[0],null)}else if(this.$2i_5){for(var f={},e=0;e<this.$2i_5.length;e++)f[this.$2i_5[e]]=!0;for(var n=0;n<this.$4_4.length;n++)if(!_Object.isNullOrUndefined(f[this.$4_4[n].Name])){if(!this.$4_4[n].DisplayedInSimpleMode){this.isSimpleMode=!1;this.conditionEditors[0].set_SimpleMode(!1)}this.conditionEditors[0].setValueAndSupressEditorPopup(this.$4_4[n],null);break}for(var t=0;t<this.$D_4.length;t++)if(!_Object.isNullOrUndefined(f[this.$D_4[t].Name])){if(!this.$D_4[t].DisplayedInSimpleMode){this.isSimpleMode=!1;this.actionEditors[0].set_SimpleMode(!1)}this.actionEditors[0].setValueAndSupressEditorPopup(this.$D_4[t],null);break}this.switchMode()}},validate:function(n){var t=!0;if(this.$4q_5){t=!1;for(var i=0;i<this.conditionEditors.length;i++)this.conditionEditors[i].get_hasSelection()&&(t=!0);t||this.$4J_5(!0)}this.isSimpleMode||(this.allowNoActions=this.$7_5.checked);return RuleEditor.prototype.validate.call(this,n)&&t},onWhatThisMeanLinkClicked:function(n){PopupWindowManager.showHelpClient(this.$3t_5);n.preventDefault();n.stopPropagation()},dispose:function(){$removeHandler(this.$4P_5,EventNames.click,this.$$d_onWhatThisMeanLinkClicked);$removeHandler(this.$7_5,EventNames.click,this.$$d_$4w_5);RuleEditor.prototype.dispose.call(this)},initParametersPanel:function(){RuleEditor.prototype.initParametersPanel.call(this);var i="stopProcessingChk";var r="whatThisMeanLnk";var t=document.createElement("TR");this.ruleNameLabelRow.parentNode.insertBefore(t,this.ruleNameLabelRow);this.$2E_5=document.createElement("TD");this.$2E_5.className=CssClasses.phrasesLabel;this.$2E_5.colSpan=2;var n=document.createElement("DIV");var u=String.format("<a id='{0}' href='javascript:void(0);'>{1}</a>",r,RtlUtil.convertToBidiString(Strings.get_WhatDoesThisMean()));var f=Strings.get_StopProcessingRuleLabel()+" "+u;n.innerHTML=String.format("<input id='{0}' class='RuleStopProcessingCheckBox' name='{0}' type='checkbox' /><label id='{0}_label' class='RuleStopProcessingLabel' for='{0}'>{1}</label>",i,f);n.className=CssClasses.ruleStopProcessingDiv;this.$2E_5.appendChild(n);t.id="stopProcessingMoreRuleRow";t.insertCell(-1);t.appendChild(this.$2E_5);this.$4P_5=$get(r,n);$addHandler(this.$4P_5,EventNames.click,this.$$d_onWhatThisMeanLinkClicked);this.$7_5=$get(i,n);$addHandler(this.$7_5,EventNames.click,this.$$d_$4w_5);this.$7_5.checked=this.$35_5()},switchMode:function(){_DomElement.toggelCssClass(this.$2E_5,this.isSimpleMode,CssClasses.hiddenCSS);if(!this.$J_4&&this.$22_5&&!this.isSimpleMode){for(var t=new Array(0),u=new Array(0),n=0;n<this.conditionEditors.length;n++)if(this.conditionEditors[n].get_hasSelection()){Array.add(t,this.conditionEditors[n].$3_3);Array.add(u,this.conditionEditors[n].get_value())}for(var r=0;r<this.conditionEditors.length;r++)this.conditionEditors[r].dispose();RuleEditorUtil.removeSiblings(this.conditionLabelRow,this.addConditionButtonRow);this.conditionEditors=new Array(0);if(t.length<1){Array.add(this.conditionEditors,this.createConditionEditor(null,{}));this.conditionEditors[0].set_isRemovable(!1)}else for(var i=0;i<t.length;i++){var f=this.createConditionEditor(t[i],u[i]);f.set_value(null);Array.add(this.conditionEditors,f)}this.autoGenerateName()}RuleEditor.prototype.switchMode.call(this)},onActionEditorsChanged:function(){if(!this.$J_4&&!this.$3P_5){var n=this.$35_5();this.$7_5&&this.$7_5.checked!==n&&(this.$7_5.checked=n)}},$4w_5:function(n){this.$3P_5=!0},$35_5:function(){for(var t=!1,n=0;n<this.actionEditors.length;++n)if(this.actionEditors[n].$3_3&&this.actionEditors[n].$3_3.StopProcessingRulesByDefault){t=!0;break}return t},$4J_5:function(n){_DomElement.toggelCssClass(this.$1w_5,!n,CssClasses.hiddenCSS)},$5K_5:function(n,t){var i=this.$5L_5(n,this.addConditionButtonRow,"PreCannedConditionEditor_");i.set_value(t);i.addCssClass(CssClasses.ruleCondition);var r=this;i.add_valueChanged(function(n,t){i.get_hasSelection()&&r.$4J_5(!1)});n&&!n.hasPermission&&i.set_disabled(!0);return i},$5L_5:function(n,t,i){var r=document.createElement("TR");r.id=i+n.Name;t.parentNode.insertBefore(r,t);return $create(PreCannedPhraseEditor,{Phrase:n,LabelString:n.PreCannedText,SimpleMode:this.isSimpleMode},null,null,r)}};function JournalRuleEditor(n){this.$$d_validateJournalEmailAddress=Function.createDelegate(this,this.validateJournalEmailAddress);JournalRuleEditor.initializeBase(this,[n])}JournalRuleEditor.prototype={$3y_5:null,$S_5:null,$3x_5:null,get_value:function(){var n=RuleEditor.prototype.get_value.call(this);n.JournalEmailAddress=this.$S_5.value;return n},set_value:function(n){RuleEditor.prototype.set_value.call(this,n);this.$S_5.value=n.JournalEmailAddress;this.validateJournalEmailAddress(null);return n},initialize:function(){RuleEditor.prototype.initialize.call(this);$addHandler(this.$S_5,"change",this.$$d_validateJournalEmailAddress);this.validateJournalEmailAddress(null)},validateJournalEmailAddress:function(n){JournalRuleEditor.$55.test(this.$S_5.value)?FieldValidationAssistant.get_instance().setTextboxErrorMessage(this.$S_5,null):FieldValidationAssistant.get_instance().setTextboxErrorMessage(this.$S_5,Strings.get_JournalEmailAddressInvalid())},initParametersPanel:function(){RuleEditor.prototype.initParametersPanel.call(this);var n=document.createElement("TD");n.className=CssClasses.phrasesLabel;n.colSpan=2;n.innerHTML="<span id='txtJournalEmailAddress_label'>"+Strings.get_JournalEmailAddressLabel()+"</span>";this.$3x_5=this.phrasesTable.insertRow(this.ruleNameLabelRow.rowIndex);this.$3x_5.insertCell(-1);this.$3x_5.appendChild(n);var t=document.createElement("TD");t.colSpan=2;this.$S_5=document.createElement("input");this.$S_5.type="text";this.$S_5.id="txtJournalEmailAddress";this.$S_5.name="journalEmailAddress";this.$S_5.className="JournalEmailAddressTextBox";for(var r={},i=0;i<this.$f_4.length;i++)r[this.$f_4[i]]=!0;_Object.isNullOrUndefined(r.Name)||(this.$S_5.disabled=!0);this.$S_5.setAttribute("maxLength",256);t.appendChild(this.$S_5);this.$3y_5=this.phrasesTable.insertRow(this.ruleNameLabelRow.rowIndex);this.$3y_5.insertCell(-1);this.$3y_5.appendChild(t)}};function MoreOptionRecipientConditionEditor(n){this.$$d_$5q_5=Function.createDelegate(this,this.$5q_5);MoreOptionRecipientConditionEditor.initializeBase(this,[n])}MoreOptionRecipientConditionEditor.prototype={$1W_5:null,$5q_5:function(n){this.$1W_5.style.display="none";this.get_element().style.display="";EcpUtil.safeFocus(this.get_element().getElementsByTagName("button")[0]);n.preventDefault()},get_MoreOptionButton:function(){return this.$1W_5},set_MoreOptionButton:function(n){this.$1W_5=n;return n},initialize:function(){RecipientConditionEditor.prototype.initialize.call(this);this.get_element().style.display="none";$addHandler(this.$1W_5,"click",this.$$d_$5q_5);this.$1W_5.setAttribute("href","")},dispose:function(){$removeHandler(this.$1W_5,"click",this.$$d_$5q_5);RecipientConditionEditor.prototype.dispose.call(this)},get_value:function(){return RecipientConditionEditor.prototype.get_value.call(this)},set_value:function(n){RecipientConditionEditor.prototype.set_value.call(this,n);if(this.conditionEditors&&this.conditionEditors.length>0){this.get_element().style.display="";this.$1W_5.style.display="none"}return n}};function MultilineStringEditControl(n){MultilineStringEditControl.initializeBase(this,[n])}MultilineStringEditControl.prototype={get_TextArea:function(){return this.inputElement},set_TextArea:function(n){this.inputElement=n;return n},initialize:function(){StringEditControlBase.prototype.initialize.call(this);this.get_TextArea().setAttribute("maxLength",this.$2Y_4.toString())},$2B_5:function(n){this.get_setErrorsWarningsDelegate()&&this.get_setErrorsWarningsDelegate()(n,!0)},get_value:function(){return this.get_TextArea().value},set_value:function(n){this.get_TextArea().value=n.toString();StringEditControlBase.prototype.onTextChanged.call(this,null);return n},get_setErrorsWarningsDelegate:function(){return this.$9_5},set_setErrorsWarningsDelegate:function(n){this.$9_5=n;return n},$9_5:null,get_enableOkButtonDelegate:function(){return this.$5_5},set_enableOkButtonDelegate:function(n){this.$5_5=n;return n},$5_5:null,validate:function(n){var t=new RegExp(this.$2J_4);if(t.test(this.get_TextArea().value)){this.$2B_5(null);return!0}else{this.$2B_5([Strings.InvalidCharacter("")]);return!1}}};function NotificationPhoneNumberParameterEditor(n){this.$$d_$5c_4=Function.createDelegate(this,this.$5c_4);NotificationPhoneNumberParameterEditor.initializeBase(this,[n]);n.id="NotificationPhoneNumberParameterEditor";this.$1R_4=new WebServiceMethod;this.$1R_4.set_MethodName("GetObject");this.$1R_4.set_ParameterNames(5);this.$1R_4.set_ServiceUrl(NotificationPhoneNumberParameterEditor.$4p);this.$1R_4.add_Succeeded(this.$$d_$5c_4)}NotificationPhoneNumberParameterEditor.prototype={$1R_4:null,$5d_4:0,$4V_4:!1,$1K_4:null,add_refreshStarted:function(n){throw Error.notImplemented();},remove_refreshStarted:function(n){throw Error.notImplemented();},add_refreshCompleted:function(n){throw Error.notImplemented();},remove_refreshCompleted:function(n){throw Error.notImplemented();},get_refreshing:function(){throw Error.notImplemented();},get_returnObjectType:function(){return 0},get_warnings:function(){throw Error.notImplemented();},showDialog:function(n,t,i){if(!this.$1R_4.get_isBusy()){this.$1K_4=i;this.$4V_4?this.$61_4():NotificationPhoneNumberParameterEditor.$4O?NotificationPhoneNumberParameterEditor.$1D&&i(NotificationPhoneNumberParameterEditor.$1D,!0):this.$1R_4.invokeWithArgs([null],++this.$5d_4);this.$4V_4=!0}},refresh:function(){},mergeRefresh:function(n){throw Error.notImplemented();},removeObject:function(n){throw Error.notImplemented();},refreshObject:function(n){NotificationPhoneNumberParameterEditor.$1D=this.$4o_4(n);this.$1K_4(NotificationPhoneNumberParameterEditor.$1D,!0)},createEditor:function(){return this},$5c_4:function(n,t){NotificationPhoneNumberParameterEditor.$1D=this.$4o_4(t.get_results());NotificationPhoneNumberParameterEditor.$4O=!0;NotificationPhoneNumberParameterEditor.$1D&&this.$1K_4(NotificationPhoneNumberParameterEditor.$1D,!0)},$4o_4:function(n){if(!n.Output||!n.Output.length)return null;var r=n.Output[0].NotificationPhoneNumberVerified;if(!r)return null;var t=n.Output[0].NotificationPhoneNumber;if(!t)return null;var i=n.Output[0].NotificationPhoneCountryCode;return i?"+"+i+t:t},$61_4:function(){PopupWindowManager.showPropertiesDialog(NotificationPhoneNumberParameterEditor.$4u,this,BuildCenteredWindowFeatureString(425,600,GlobalVariables.FeaturesForPopups),null)}};function NumberRangeControl(n){this.$$d_$5t_4=Function.createDelegate(this,this.$5t_4);this.$n_4=[0,999999];NumberRangeControl.initializeBase(this,[n])}NumberRangeControl.prototype={get_AtLeastTextbox:function(){return this.$t_4},set_AtLeastTextbox:function(n){this.$t_4=n;return n},$t_4:null,get_AtMostTextbox:function(){return this.$u_4},set_AtMostTextbox:function(n){this.$u_4=n;return n},$u_4:null,get_inputBounds:function(){return this.$n_4},set_inputBounds:function(n){if(n[0]<0)throw Error.argumentOutOfRange("NumberRangeControl only supports MinValue (the first element in InputBounds) that is not less than zero currently.");if(n[0]>n[1])throw Error.invalidOperation("MinValue (the first element in InputBounds) > MaxValue (the second element in InputBounds).");this.$n_4=n;this.$60_4(this.get_$23_4().toString().length);return n},get_$3C_4:function(){return this.$n_4[0]},get_$23_4:function(){return this.$n_4[1]},initialize:function(){this.$3L_4(this.$t_4);this.$3L_4(this.$u_4);$addHandler(this.$t_4,"blur",this.$$d_$5t_4);$addHandler(this.$u_4,"blur",this.$$d_$5t_4)},dispose:function(){$removeHandler(this.$t_4,"blur",this.$$d_$5t_4);$removeHandler(this.$u_4,"blur",this.$$d_$5t_4);EcpControl.prototype.dispose.call(this)},$5t_4:function(n){this.$3L_4(n.target)},$3L_4:function(n){n.value||(n.value="0");var t=parseFloat(n.value);t<this.get_$3C_4()&&(n.value=this.get_$3C_4().toString());t>this.get_$23_4()&&(n.value=this.get_$23_4().toString())},$60_4:function(n){this.$t_4.setAttribute("maxLength",n);this.$u_4.setAttribute("maxLength",n)},$2B_4:function(n){this.get_setErrorsWarningsDelegate()&&this.get_setErrorsWarningsDelegate()(n,!0)},get_$3W_4:function(){return this.$t_4.value?parseFloat(this.$t_4.value):0},set_$3W_4:function(n){this.$t_4.value=n.toString();return n},get_$3X_4:function(){return this.$u_4.value?parseFloat(this.$u_4.value):0},set_$3X_4:function(n){this.$u_4.value=n.toString();return n},get_value:function(){var n={};n.AtMost=this.get_$3X_4();n.AtLeast=this.get_$3W_4();return n},set_value:function(n){this.set_$3W_4(n.AtLeast);this.set_$3X_4(n.AtMost);return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null,validate:function(n){if(this.get_$3W_4()>this.get_$3X_4()){this.$2B_4([Strings.get_InvalidValueRange()]);return!1}else{this.$2B_4(null);return!0}}};function NumberEditControl(n){this.$n_6=[0,999999];NumberEditControl.initializeBase(this,[n])}NumberEditControl.prototype={get_inputBounds:function(){return this.$n_6},set_inputBounds:function(n){if(n[0]<0)throw Error.argumentOutOfRange("NumberEditControl only supports MinValue (the first element in InputBounds) that is not less than zero currently.");if(n[0]>n[1])throw Error.invalidOperation("MinValue (the first element in InputBounds) > MaxValue (the second element in InputBounds).");this.$n_6=n;this.get_TextBox().maxLength=this.get_$23_6().toString().length;return n},get_$3C_6:function(){return this.$n_6[0]},get_$23_6:function(){return this.$n_6[1]},get_defaultValue:function(){return this.$2x_6},set_defaultValue:function(n){this.$2x_6=n;return n},$2x_6:0,initialize:function(){StringEditControl.prototype.initialize.call(this);this.$3L_6(this.get_TextBox())},$3L_6:function(n){n.value||(n.value=this.$2x_6.toString())},validate:function(n){var t=parseFloat(this.get_TextBox().value);if(t>this.get_$23_6()||t<this.get_$3C_6()){this.setError([Strings.InvalidNumberValue(this.get_$3C_6(),this.get_$23_6())]);return!1}else{this.get_TextBox().value&&(this.get_TextBox().value=t.toString());this.setError(null);return!0}}};function NumericInputBehavior(n){this.$$d_$4x_2=Function.createDelegate(this,this.$4x_2);this.$$d_$4y_2=Function.createDelegate(this,this.$4y_2);this.$$d_$5n_2=Function.createDelegate(this,this.$5n_2);NumericInputBehavior.initializeBase(this,[n]);this.$3u_2=n}NumericInputBehavior.prototype={$3u_2:null,$2u_2:null,initialize:function(){Sys.UI.Behavior.prototype.initialize.call(this);$addHandler(this.get_element(),"keypress",this.$$d_$5n_2);$addHandler(this.get_element(),"drop",this.$$d_$4y_2);$addHandler(this.get_element(),"paste",this.$$d_$4y_2);$addHandler(this.get_element(),"input",this.$$d_$4x_2);$addHandler(this.get_element(),"blur",this.$$d_$4x_2)},dispose:function(){$removeHandler(this.get_element(),"keypress",this.$$d_$5n_2);$removeHandler(this.get_element(),"input",this.$$d_$4x_2);$removeHandler(this.get_element(),"blur",this.$$d_$4x_2);$removeHandler(this.get_element(),"drop",this.$$d_$4y_2);$removeHandler(this.get_element(),"paste",this.$$d_$4y_2);Sys.UI.Behavior.prototype.dispose.call(this)},get_$5T_2:function(){this.$2u_2||(this.$2u_2=EcpControl.fromElement(this.get_element(),!0));return this.$2u_2},$4y_2:function(n){var t=this;window.setTimeout(function(){t.$4x_2(n)},0)},$4x_2:function(n){var t=this.$3u_2.value;if(t&&!EcpUtil.isNumericStringAllowFullWidth(t)){var i=this.$5W_2(t);this.get_$5T_2()?this.$2u_2.set_text(i):this.$3u_2.value=i}},$5n_2:function(n){if((!EcpUtil.isFirefox()||n.rawEvent.charCode)&&!(n.charCode>127)&&!n.altKey&&!n.ctrlKey&&(!EcpUtil.isSafari()||!n.rawEvent.metaKey)&&n.charCode!==13&&n.charCode!==27&&n.charCode!==8&&n.charCode!==9&&!EcpUtil.isDigit(String.fromCharCode(n.charCode).charAt(0))){n.preventDefault();n.stopPropagation()}},$5W_2:function(n){for(var i=new Sys.StringBuilder,t=0;t<n.length;t++){var r=n.charAt(t);var u=n.charCodeAt(t);(EcpUtil.isDigit(r)||EcpUtil.isFullWidthDigit(u))&&i.append(r.toString())}return i.toString()}};function ObjectPicker(n){ObjectPicker.initializeBase(this,[n])}ObjectPicker.prototype={$51_6:null,$2g_6:!1,$2R_6:null,$1X_6:null,get_SingleSelect:function(){return this.$2g_6},set_SingleSelect:function(n){this.$2g_6=n;return n},initialize:function(){EcpSelect.prototype.initialize.call(this);this.$51_6=this.get_PickerFormUrl();EntryEditors.register("ObjectPicker",this)},showDialog:function(n,t,i){var r=this.get_PickerFormUrl();this.get_PickerFormUrl().startsWith("~/")&&(r=this.$51_6.replace("pickerurlplaceholder.aspx",this.get_PickerFormUrl().substr(2)));this.$2R_6=i;this.invokePicker(this.generatePickerUrl(r,this.$2g_6));this.$1X_6=t},onOK:function(n){this.get_ValueProperty()==="Identity"?this.$2R_6(this.$63_6(n),!0):this.$2R_6(this.$68_6(n),!0)},getOriginalSelectionInternal:function(){return this.$1X_6},$63_6:function(n){for(var i=[],t=0;t<n.length;t++)Array.add(i,n[t].Identity);return i},$68_6:function(n){var t=[];if(this.get_ValueProperty()==="Identity"){for(var r=0;r<n.length;r++)Array.add(t,n[r].Identity);return t}for(var i=0;i<n.length;i++){var u={};u.Identity=n[i].Identity;u[this.get_ValueProperty()]=n[i][this.get_ValueProperty()];Array.add(t,u)}return t}};function PeoplePicker(n){this.$$d_onCloseDialogCallBack=Function.createDelegate(this,this.onCloseDialogCallBack);this.$$d_$5s_6=Function.createDelegate(this,this.$5s_6);this.$$d_$5p_6=Function.createDelegate(this,this.$5p_6);PeoplePicker.initializeBase(this,[n])}PeoplePicker.prototype={$g_6:null,$41_6:null,$21_6:!1,$3V_6:!1,$A_6:null,$34_6:!1,$2R_6:null,$1X_6:null,get_PickerLink:function(){return this.$g_6},set_PickerLink:function(n){this.$g_6=n;return n},get_LinkText:function(){return this.$41_6},set_LinkText:function(n){this.$41_6=n;return n},get_IsStandalonePicker:function(){return this.$21_6},set_IsStandalonePicker:function(n){this.$21_6=n;return n},get_AllowTyping:function(){return this.$3V_6},set_AllowTyping:function(n){this.$3V_6=n;return n},get_value:function(){return this.$A_6},set_value:function(n){this.$A_6=n;this.$g_6.innerHTML=EcpUtil.reserveSpace(EcpUtil.htmlEncode(this.getDisplayText(-1,",")));this.$3S_6();return n},initialize:function(){EcpSelect.prototype.initialize.call(this);this.$21_6?this.setEnabled(this.get_enabled()):EntryEditors.register("PeoplePicker",this)},setEnabled:function(n){if(n){if(this.$21_6){this.get_element().removeAttribute("disabled");this.$g_6.removeAttribute("disabled");this.$g_6.href="javascript:void(0);";this.$g_6.tabIndex=0}this.$5A_6()}else{this.$4d_6();if(this.$21_6){this.$g_6.removeAttribute("tabindex");this.$g_6.removeAttribute("href");this.get_element().setAttribute("disabled",!0);this.$g_6.setAttribute("disabled",!0)}}},$5A_6:function(){if(!this.$34_6){$addHandler(this.$g_6,"click",this.$$d_$5p_6);ControlSizeMonitor.registerControl(this.get_element(),this.$$d_$5s_6);this.$34_6=!0}},$4d_6:function(){if(this.$34_6){$removeHandler(this.$g_6,"click",this.$$d_$5p_6);ControlSizeMonitor.unregisterControl(this.get_element(),this.$$d_$5s_6);this.$34_6=!1}},$5p_6:function(n){this.showDialog(null,this.$A_6,this.$$d_onCloseDialogCallBack);n.preventDefault()},$5s_6:function(n){this.$3S_6()},onCloseDialogCallBack:function(n,t){t&&this.set_value(n)},getDisplayText:function(n,t){var f=this.$41_6;if(!_Object.isNullOrUndefined(this.$A_6)&&Array.isInstanceOfType(this.$A_6)){var i=new Sys.StringBuilder;var u=this.$A_6;(n===-1||n>u.length)&&(n=u.length);for(var r=0;r<n;r++){if(r>0){i.append(" ");i.append(t);i.append(" ")}i.append("'");i.append(u[r].DisplayName);i.append("'")}f=i.toString()}return f},$3S_6:function(){this.get_element().title=this.get_element().scrollWidth>this.get_element().clientWidth?EcpUtil.getInnerText(this.get_element()):""},showDialog:function(n,t,i){if(this.$2a_6){var r=this;this.$2a_6.invokeOwaPicker(this.$14_6==="PickFrom"?0:1,t,function(){var n=r.$2a_6.get_peopleIdentityArrayList();n.length||(n=null);i(n,!0)})}else{this.invokePicker(this.generatePickerUrl(this.get_PickerFormUrl(),this.get_$62_6())+(this.$3V_6?"&"+EcpUrl.allowTypingParam+"=t":""));this.$2R_6=i;this.$1X_6=this.$65_6(t)}},$65_6:function(n){var t=null;if(n){t=[];for(var i=0;i<n.length;i++){var r=this.$64_6(n[i]);Array.add(t,r)}}return t},$64_6:function(n){var t={};t.Identity=new Identity(n.SMTPAddress,n.DisplayName);t[this.get_ValueProperty()]=n.SMTPAddress;t[this.get_DisplayProperty()]=n.DisplayName;return t},get_$62_6:function(){return this.$14_6==="PickSendFrom"||this.$14_6==="PickSelectMailbox"||this.$14_6==="PickPAAOneCaller"||this.$14_6==="PickBuddy"||this.$14_6==="PickFilter"},onOK:function(n){this.$2R_6(this.$66_6(n),!0)},$66_6:function(n){for(var i=[],t=0;t<n.length;t++){var r=this.$67_6(n[t]);Array.add(i,r)}return i},$67_6:function(n){var t=n[this.get_ValueProperty()];var i=n[this.get_DisplayProperty()];return new PeopleIdentity(i,t,t,3,"SMTP",0)},getOriginalSelectionInternal:function(){return this.$1X_6},get_OwaPickerUtil:function(){return this.$2a_6},set_OwaPickerUtil:function(n){this.$2a_6=n;return n},$2a_6:null,get_PickerType:function(){return this.$14_6},set_PickerType:function(n){this.$14_6=n;return n},$14_6:null,dispose:function(){this.$21_6&&this.$4d_6();EcpSelect.prototype.dispose.call(this)}};function PreCannedPhraseEditor(n){this.$$d_$5C_4=Function.createDelegate(this,this.$5C_4);PreCannedPhraseEditor.initializeBase(this,[n])}PreCannedPhraseEditor.prototype={$2f_4:null,initializeSelectionCell:function(){var n=this.get_id()+"_chk";this.selectionCell.innerHTML=String.format("<input id='{0}' class='RuleStopProcessingCheckBox' name='{0}' type='checkbox' /><label id='{0}_label' class='RuleStopProcessingLabel' for='{0}'>{1}</label>",n,this.$3z_4);this.$2f_4=$get(n,this.selectionCell);$addHandler(this.$2f_4,"click",this.$$d_$5C_4);this.createParameterEditors()},dispose:function(){$removeHandler(this.$2f_4,"click",this.$$d_$5C_4);RulePhraseEditor.prototype.dispose.call(this)},$5C_4:function(n){this.get_disabled()||this.$3F_3();n.stopPropagation()},get_LabelString:function(){return this.$3z_4},set_LabelString:function(n){this.$3z_4=n;return n},$3z_4:null,get_hasSelection:function(){return this.$2f_4.checked},isDirty:function(){return this.get_hasSelection()},get_disabled:function(){return this.isDisabled},set_disabled:function(n){if(this.get_disabled()!==n){this.isDisabled=n;this.$2f_4.disabled=n;if(n)for(var t=0;t<this.$2_3.length;t++)this.$2_3[t].set_disabled(!0)}return n}};function RecipientConditionEditor(n){this.$$d_$3Z_4=Function.createDelegate(this,this.$3Z_4);this.$$d_$5j_4=Function.createDelegate(this,this.$5j_4);this.$$d_onButtonClicked=Function.createDelegate(this,this.onButtonClicked);this.conditionEditors=new Array(0);this.$Z_4={};this.$2e_4=[];this.$2m_4=Strings.get_AddEAPCondtionButtonText();RecipientConditionEditor.initializeBase(this,[n])}RecipientConditionEditor.$1l=function(n,t){for(var i=0;i<t.length;i++){n.append(EcpUtil.htmlEncode(t[i].DisplayText));n.append("<br/>")}};RecipientConditionEditor.prototype={$X_4:null,$x_4:null,$8_4:null,$G_4:null,$3g_4:null,$1g_4:null,$6_4:null,$49_4:0,$4_4:null,$f_4:null,$1B_4:null,$3A_4:null,$3h_4:"",$2U_4:!1,$4F_4:!1,get_AllConditions:function(){return this.$4_4},set_AllConditions:function(n){this.$4_4=n;return n},get_NonWritablePhraseNames:function(){return this.$f_4},set_NonWritablePhraseNames:function(n){this.$f_4=n;return n},get_HasDefaultItem:function(){return this.$2U_4},set_HasDefaultItem:function(n){this.$2U_4=n;return n},get_value:function(){if(!this.$1B_4){this.$1B_4={};RuleEditor.$3K(this.$4_4,this.conditionEditors,this.$Z_4,this.$1B_4);for(var n=0;n<this.$2e_4.length;n++)_Object.isUndefined(this.$1B_4[this.$2e_4[n]])&&(this.$1B_4[this.$2e_4[n]]=null);_Object.copyDictionary(this.$1B_4,this.$Z_4)}return this.$1B_4},set_value:function(n){this.$Z_4=EcpUtil.cloneDataObject(n)||{};for(var t=0;t<this.conditionEditors.length;t++)this.conditionEditors[t].dispose();RuleEditorUtil.removeSiblings(this.$3g_4,this.$1g_4);if(n&&this.$4_4&&this.$4_4.length>0){this.conditionEditors=new Array(0);for(var i=0;i<this.$4_4.length;i++){var r=this.$4_4[i];if(RuleEditor.$20(n,r)){var u=this.$3j_4(r,n);Array.add(this.conditionEditors,u)}}}if(this.$2U_4&&!this.conditionEditors.length){var f=this.$3j_4(null,{});Array.add(this.conditionEditors,f);this.conditionEditors[0].set_isRemovable(!1)}else this.$2U_4&&this.conditionEditors.length>0&&this.conditionEditors[0].set_isRemovable(!1);this.$3c_4();return n},initialize:function(){EcpControl.prototype.initialize.call(this);this.initParametersPanel();this.$4R_4();$addHandler(this.get_element(),"click",this.$$d_onButtonClicked);this.add_propertyChanged(this.$$d_$5j_4);var n=new Sys.StringBuilder;RecipientConditionEditor.$1l(n,this.$4_4);this.$X_4=new ComboBoxSizeMoniter(this.get_element(),this.$$d_$3Z_4,n.toString());this.$X_4.start();this.$6_4.tabIndex=0;this.get_element().className=this.get_$2s_4()},dispose:function(){this.$X_4.end();$removeHandler(this.get_element(),"click",this.$$d_onButtonClicked);this.remove_propertyChanged(this.$$d_$5j_4);EcpControl.prototype.dispose.call(this)},$5j_4:function(n,t){if(t.get_propertyName()==="enabled"){for(var r=this.conditionEditors,u=r.length,i=0;i<u;++i){var f=r[i];f.set_disabled(!this.get_enabled())}this.$6_4.style.display=this.get_enabled()?"":"none"}},onButtonClicked:function(n){var i=n.target;if(i===this.$6_4){i.disabled||Array.add(this.conditionEditors,this.$3j_4(null,{}));this.$3c_4()}else{var r=RulePhraseEditor.getClickedLink(i);if(r){var t=$find(r.parentNode.parentNode.id);if(t.get_hasSelection()){var u=t.get_value();for(var f in u){var o={key:f,value:u[f]};Array.add(this.$2e_4,o.key)}}RuleEditor.$27(this.conditionEditors,t);Array.remove(this.conditionEditors,t);EcpUtil.safeFocus(this.$6_4);var e=t.get_element();t.dispose();e.parentNode.removeChild(e);this.$4z_4()}}this.$2U_4&&this.conditionEditors.length>0&&this.conditionEditors[0].set_isRemovable(this.conditionEditors.length>1)},get_addConditionButtonText:function(){return this.$2m_4},set_addConditionButtonText:function(n){this.$2m_4=n;return n},get_conjunctionText:function(){return this.$3h_4},set_conjunctionText:function(n){this.$3h_4=n;return n},get_restrictConditionsToSelections:function(){return this.$4F_4},set_restrictConditionsToSelections:function(n){this.$4F_4=n;return n},validate:function(n){for(var i=!0,r=0;r<this.conditionEditors.length;r++){var t=this.conditionEditors[r];i=!!(i&t.validate(n)&&t.get_enabled());if(t.get_hasSelection()){var u=t.get_value()[t.$3_3.Name];t.validateParameterEditors(!0)||(i=!1)}}i||this.set_lastError(this.$3A_4=Error.create(Strings.get_ConditionValueRequriedErrorMessage()));return!!(i&EcpControl.prototype.validate.call(this,n))},setControlInError:function(n,t){},initParametersPanel:function(){this.$8_4=document.createElement("TABLE");this.$8_4.setAttribute("cellPadding",0);this.$8_4.setAttribute("cellSpacing",0);this.$8_4.className=CssClasses.ruleParametersTable;this.get_element().appendChild(this.$8_4);var n=document.createElement("COLGROUP");this.$8_4.appendChild(n);n.appendChild(document.createElement("COL"));this.$x_4=document.createElement("COL");n.appendChild(this.$x_4);n.appendChild(document.createElement("COL"));if(EcpUtil.isSafari()){this.$G_4=this.$8_4.insertRow(-1);this.$G_4.style.height="0px";this.$G_4.insertCell(-1);this.$G_4.insertCell(-1);this.$G_4.insertCell(-1)}var i=RuleEditor.createEditorLabelCell("",null,this.get_$2s_4(),3);this.$3g_4=this.$8_4.insertRow(-1);this.$3g_4.appendChild(i);var t=document.createElement("TD");t.colSpan=2;this.$6_4=document.createElement("button");this.$6_4.className=CssClasses.messageTypeLaunchButton;EcpUtil.setInnerText(this.$6_4,this.$2m_4);this.$6_4.id=this.get_id()+"addConditionButton";this.$6_4.setAttribute("onclick",GlobalVariables.doNothingScript);t.appendChild(this.$6_4);this.$1g_4=this.$8_4.insertRow(-1);this.$1g_4.insertCell(-1);this.$1g_4.appendChild(t)},get_$2s_4:function(){return this.get_id()+"ConditionEditor"},$3Z_4:function(n){var t=this.$X_4.get_width()+GlobalVariables.scrollBarWidth;var i=this.get_element().offsetWidth*75/100;t>i&&(t=i);this.$x_4.style.width=t+"px";EcpUtil.isSafari()&&this.$G_4&&(this.$G_4.cells[1].style.width=t+"px")},$1p_4:function(n,t,i,r){var u=document.createElement("TR");u.id=r+"_"+this.$49_4++;i.parentNode.insertBefore(u,i);var f=$create(RulePhraseEditor,{Phrase:n,AllPhrases:t,SimpleMode:!1},null,null,u);var e=this;f.add_valueChanged(function(n,t){e.$4z_4()});return f},$3c_4:function(){this.$6_4.disabled=this.$4F_4&&this.conditionEditors.length>=this.$4_4.length?!0:!1},$4z_4:function(){this.$3c_4();this.$1B_4=null;this.raisePropertyChanged("value");this.$3A_4&&this.get_lastError()===this.$3A_4&&this.set_lastError(this.$3A_4=null)},$3j_4:function(n,t){this.conditionEditors.length>0&&RuleEditor.$1o(this.$1g_4,this.$3h_4);var i=this.$1p_4(n,this.$4_4,this.$1g_4,this.get_$2s_4());i.set_value(t);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),this.get_$2s_4()+AriaUtil.associatedLabelSuffix);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),this.get_id()+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLabelID(i.$0_3.get_element(),AriaUtil.getFvaReaderSpanId(i.$0_3.get_element()));var r=this;i.$0_3.add_dropDown(function(n,t){RuleEditor.$2I(r.$4_4,r.conditionEditors,i,!0)});(!n||n.hasPermission)&&this.get_enabled()||i.set_disabled(!0);return i},$4R_4:function(){var i={};if(this.$f_4)for(var t=0;t<this.$f_4.length;t++)i[this.$f_4[t]]=!0;for(var n=0;n<this.$4_4.length;n++)this.$4_4[n].hasPermission=_Object.isNullOrUndefined(i[this.$4_4[n].Name])}};function RuleEditor(n){this.$$d_$3Z_4=Function.createDelegate(this,this.$3Z_4);this.$$d_onRuleNameChanged=Function.createDelegate(this,this.onRuleNameChanged);this.$$d_onButtonClicked=Function.createDelegate(this,this.onButtonClicked);this.conditionEditors=new Array(0);this.actionEditors=new Array(0);this.originalValue={};this.$H_4=new Array(0);RuleEditor.initializeBase(this,[n])}RuleEditor.$20=function(n,t){if(t.Parameters&&t.Parameters.length>0){for(var r=0,e=0,u=0;u<t.Parameters.length;u++)t.Parameters[u].ExactMatch&&r++;for(var i=0;i<t.Parameters.length;i++){var f=n[t.Parameters[i].Name];if(!_Object.isNullOrUndefined(f)&&(!Array.isInstanceOfType(f)||f.length>0))if(r){if(t.Parameters[i].ExactMatch&&t.Parameters[i].Value===n[t.Parameters[i].Name]){e++;if(r===e)return!0}}else return!0}}return!1};RuleEditor.$1l=function(n,t){for(var i=0;i<t.length;i++){n.append(EcpUtil.htmlEncode(t[i].DisplayText));n.append("<br/>")}};RuleEditor.$2I=function(n,t,i,r){for(var f=0;f<n.length;f++){var u=i.$0_3.findByValue(n[f]);if(u){n[f].hasPermission||u.set_visible(!1);if(n[f]===i.$3_3){u.set_enabled(!0);u.set_checked(!1)}else if(RuleEditor.findEditorByPhrase(t,n[f])){u.set_enabled(!1);u.set_checked(!0)}else{RuleEditor.$3q([i],n[f])?u.set_enabled(!0):RuleEditor.$3q(t,n[f])?u.set_enabled(!1):u.set_enabled(!0);u.set_checked(!1)}r&&!u.get_enabled()&&u.set_visible(!1)}}};RuleEditor.findEditorByPhrase=function(n,t){for(var i=0;i<n.length;i++)if(n[i].$3_3===t)return n[i];return null};RuleEditor.$3q=function(n,t){if(t)for(var i=0;i<n.length;i++)if(n[i].$3_3&&n[i].$3_3.Name===t.Name)return n[i];return null};RuleEditor.$4j=function(n,t){if(t)for(var i=0;i<n.length;i++)if(null!==n[i]&&n[i].Name===t)return n[i];return null};RuleEditor.$27=function(n,t){n.length>1&&(t.get_id()===n[0].get_id()?t.get_element().parentNode.removeChild(t.get_element().nextSibling):t.get_element().parentNode.removeChild(t.get_element().previousSibling))};RuleEditor.$1o=function(n,t){var i=document.createElement("TR");var r=document.createElement("TD");r.innerHTML=t;i.appendChild(document.createElement("TD"));i.appendChild(r);n.parentNode.insertBefore(i,n)};RuleEditor.$3K=function(n,t,i,r){if(n)for(var f=0;f<n.length;f++){var u=n[f];var e=RuleEditor.$3q(t,u);if(e)e.isDirty()&&_Object.copyDictionary(e.get_value(),r);else if(RuleEditor.$20(i,u))for(var o=0;o<u.Parameters.length;o++)r[u.Parameters[o].Name]=null}};RuleEditor.createEditorLabelCell=function(n,t,i,r){var u=document.createElement("TD");u.className=t||"";u.colSpan=r;var f=document.createElement("SPAN");f.innerHTML=n;f.setAttribute(AriaUtil.ariaHidden,"false");f.id=i+AriaUtil.associatedLabelSuffix;u.appendChild(f);return u};RuleEditor.prototype={conditionLabelRow:null,addConditionButtonRow:null,ruleNameLabelRow:null,isSimpleMode:!0,allowNoActions:!1,phrasesTable:null,$X_4:null,$2r_4:null,$x_4:null,$G_4:null,$l_4:null,$6_4:null,$2k_4:null,$1J_4:null,$b_4:null,$1x_4:null,$16_4:null,$W_4:null,$4G_4:null,$2M_4:null,$1C_4:null,$U_4:null,$49_4:0,$3m_4:!0,$2n_4:0,$2o_4:0,$f_4:null,$3J_4:0,$D_4:null,$4_4:null,$L_4:null,$3b_4:null,$2t_4:null,$3U_4:null,$3p_4:null,$1Y_4:null,$J_4:!0,$1I_4:!1,$2h_4:!0,$2P_4:null,$2w_4:null,$m_4:null,$Y_4:null,$1c_4:null,$11_4:!1,get_MoreOptionButton:function(){return this.$1C_4},set_MoreOptionButton:function(n){this.$1C_4=n;return n},get_MoreOptionsPanel:function(){return this.$Y_4},set_MoreOptionsPanel:function(n){this.$Y_4=n;return n},get_StaticOptionsPanel:function(){return this.$1c_4},set_StaticOptionsPanel:function(n){this.$1c_4=n;return n},get_AdvModeDialogMinHeight:function(){return this.$2n_4},set_AdvModeDialogMinHeight:function(n){this.$2n_4=n;return n},get_AdvModeDialogMinWidth:function(){return this.$2o_4},set_AdvModeDialogMinWidth:function(n){this.$2o_4=n;return n},get_NonWritablePhraseNames:function(){return this.$f_4},set_NonWritablePhraseNames:function(n){this.$f_4=n;return n},get_RuleNameMaxLength:function(){return this.$3J_4},set_RuleNameMaxLength:function(n){this.$3J_4=n;return n},get_AllActions:function(){return this.$D_4},set_AllActions:function(n){this.$D_4=n;return n},get_AllConditions:function(){return this.$4_4},set_AllConditions:function(n){this.$4_4=n;return n},get_AllExceptions:function(){return this.$L_4},set_AllExceptions:function(n){this.$L_4=n;return n},get_Caption:function(){return this.$3b_4},set_Caption:function(n){this.$3b_4=n;return n},get_ConditionLabel:function(){return this.$2t_4},set_ConditionLabel:function(n){this.$2t_4=n;return n},get_ActionLabel:function(){return this.$3U_4},set_ActionLabel:function(n){this.$3U_4=n;return n},get_ExceptionLabel:function(){return this.$3p_4},set_ExceptionLabel:function(n){this.$3p_4=n;return n},get_ParametersPanel:function(){return this.$1Y_4},set_ParametersPanel:function(n){this.$1Y_4=n;return n},get_UseSetObject:function(){return this.$J_4},set_UseSetObject:function(n){this.$J_4=n;return n},get_WrapEditors:function(){return this.$1I_4},set_WrapEditors:function(n){this.$1I_4=n;return n},get_SupportAdvancedMode:function(){return this.$2h_4},set_SupportAdvancedMode:function(n){this.$2h_4=n;return n},get_DefaultActions:function(){return this.$2P_4},set_DefaultActions:function(n){this.$2P_4=n;return n},get_DefaultConditions:function(){return this.$2w_4},set_DefaultConditions:function(n){this.$2w_4=n;return n},get_DefaultValues:function(){return this.$m_4},set_DefaultValues:function(n){this.$m_4=n;return n},get_IsCopyMode:function(){return this.$11_4},set_IsCopyMode:function(n){this.$11_4=n;return n},get_value:function(){var n={};RuleEditor.$3K(this.$4_4,this.conditionEditors,this.originalValue,n);RuleEditor.$3K(this.$D_4,this.actionEditors,this.originalValue,n);RuleEditor.$3K(this.$L_4,this.$H_4,this.originalValue,n);var t=this.$U_4.value||this.autoGenerateName();this.originalValue.Name!==t&&(n.Name=t);return n},set_value:function(n){this.originalValue=this.$11_4?{}:EcpUtil.cloneDataObject(n)||{};this.$U_4.value=n.Name;if(n&&this.$4_4&&this.$4_4.length>0){for(var t=0;t<this.conditionEditors.length;t++)this.conditionEditors[t].dispose();RuleEditorUtil.removeSiblings(this.conditionLabelRow,this.addConditionButtonRow);this.conditionEditors=new Array(0);for(var i=0;i<this.$4_4.length;i++){var r=this.$4_4[i];if(RuleEditor.$20(n,r)){r.DisplayedInSimpleMode||(this.isSimpleMode=!1);var c=this.createConditionEditor(r,n);Array.add(this.conditionEditors,c);this.$11_4&&c.forceDirty()}}if(!this.conditionEditors.length){var l=this.createConditionEditor(this.$2M_4,n);Array.add(this.conditionEditors,l);this.$11_4&&l.forceDirty();this.$6_4.disabled=!0;Sys.UI.DomElement.removeCssClass(this.$6_4,CssClasses.messageTypeLaunchButton);Sys.UI.DomElement.addCssClass(this.$6_4,CssClasses.messageTypeLaunchButtonDisabled)}this.isSimpleMode=this.isSimpleMode&&this.conditionEditors.length<=1}if(n&&this.$D_4&&this.$D_4.length>0){for(var u=0;u<this.actionEditors.length;u++)this.actionEditors[u].dispose();RuleEditorUtil.removeSiblings(this.$2k_4,this.$1J_4);this.actionEditors=new Array(0);for(var f=0;f<this.$D_4.length;f++){var e=this.$D_4[f];if(RuleEditor.$20(n,e)){e.DisplayedInSimpleMode||(this.isSimpleMode=!1);var a=this.createActionEditor(e,n);Array.add(this.actionEditors,a);this.$11_4&&a.forceDirty()}}if(!this.actionEditors.length){var v=this.createActionEditor(null,n);Array.add(this.actionEditors,v);this.$11_4&&v.forceDirty()}this.isSimpleMode=this.isSimpleMode&&this.actionEditors.length<=1}if(n&&this.$L_4&&this.$L_4.length>0){for(var o=0;o<this.$H_4.length;o++)this.$H_4[o].dispose();RuleEditorUtil.removeSiblings(this.$1x_4,this.$16_4);this.$H_4=new Array(0);for(var s=0;s<this.$L_4.length;s++){var h=this.$L_4[s];if(RuleEditor.$20(n,h)){h.DisplayedInSimpleMode||(this.isSimpleMode=!1);var y=this.$4Y_4(h,n);Array.add(this.$H_4,y);this.$11_4&&y.forceDirty()}}this.isSimpleMode=this.isSimpleMode&&!this.$H_4.length}this.switchMode();return n},initialize:function(){EcpControl.prototype.initialize.call(this);this.initParametersPanel();this.$4R_4();this.$2M_4=this.initializeApplyToAllMessageCondition();Array.add(this.$4_4,this.$2M_4);$addHandler(this.get_element(),"click",this.$$d_onButtonClicked);$addHandler(this.$U_4,"change",this.$$d_onRuleNameChanged);var i=new Sys.StringBuilder;RuleEditor.$1l(i,this.$4_4);RuleEditor.$1l(i,this.$D_4);RuleEditor.$1l(i,this.$L_4);this.$X_4=new ComboBoxSizeMoniter(this.get_element(),this.$$d_$3Z_4,i.toString());this.$X_4.start();if(this.$J_4)this.$3m_4=!1;else{if(this.$2w_4){for(var o=this.$2w_4,p=o.length,r=0;r<p;++r){var w=o[r];var s=RuleEditor.$4j(this.$4_4,w);!s.DisplayedInSimpleMode&&this.isSimpleMode&&(this.isSimpleMode=!1);var h=this.createConditionEditor(s,null);Array.add(this.conditionEditors,h);for(var c=h.$2_3,b=c.length,u=0;u<b;++u){var n=c[u];if(!_Object.isNullOrUndefined(this.$m_4)&&!_Object.isNullOrUndefined(this.$m_4[n.$1_3.Name]))try{n.set_value(EcpUtil.tryDeserialize(this.$m_4[n.$1_3.Name]))}catch(nt){n.set_value(this.$m_4[n.$1_3.Name])}}}this.$2C_4()}else{Array.add(this.conditionEditors,this.createConditionEditor(null,{}));this.conditionEditors[0].set_isRemovable(!1)}if(this.$2P_4){for(var l=this.$2P_4,k=l.length,f=0;f<k;++f){var d=l[f];var a=RuleEditor.$4j(this.$D_4,d);!a.DisplayedInSimpleMode&&this.isSimpleMode&&(this.isSimpleMode=!1);var v=this.createActionEditor(a,null);Array.add(this.actionEditors,v);for(var y=v.$2_3,g=y.length,e=0;e<g;++e){var t=y[e];if(!_Object.isNullOrUndefined(this.$m_4)&&!_Object.isNullOrUndefined(this.$m_4[t.$1_3.Name]))try{t.set_value(EcpUtil.tryDeserialize(this.$m_4[t.$1_3.Name]))}catch(tt){t.set_value(this.$m_4[t.$1_3.Name])}}}this.$2C_4()}else{Array.add(this.actionEditors,this.createActionEditor(null,{}));this.actionEditors[0].set_isRemovable(!1)}}(this.actionEditors.length>1||this.conditionEditors.length>1||this.$H_4.length>1||!this.$4n_4())&&(this.isSimpleMode=!1);this.switchMode()},dispose:function(){this.$X_4.end();$removeHandler(this.get_element(),"click",this.$$d_onButtonClicked);EcpControl.prototype.dispose.call(this)},onRuleNameChanged:function(n){this.$3m_4=!1;FieldValidationAssistant.get_instance().setTextboxErrorMessage(this.$U_4,null)},onButtonClicked:function(n){var i=n.target;if(i===this.$6_4){if(!this.$6_4.disabled){Array.add(this.conditionEditors,this.createConditionEditor(null,{}));this.$2C_4()}}else if(i===this.$b_4){Array.add(this.actionEditors,this.createActionEditor(null,{}));this.$2C_4()}else if(i===this.$W_4)Array.add(this.$H_4,this.$4Y_4(null,{}));else if(i===this.$1C_4||i.parentNode===this.$1C_4){this.isSimpleMode=!1;this.switchMode();var r=null;this.$6_4.disabled?this.$b_4.disabled?this.$W_4.disabled||(r=this.$W_4):r=this.$b_4:r=this.$6_4;r&&EcpUtil.safeFocus(r);n.preventDefault()}else{var u=RulePhraseEditor.getClickedLink(i);if(u){var t=$find(u.parentNode.parentNode.id);if(Sys.UI.DomElement.containsCssClass(t.get_element(),CssClasses.ruleCondition)){RuleEditor.$27(this.conditionEditors,t);Array.remove(this.conditionEditors,t);EcpUtil.safeFocus(this.$6_4)}else if(Sys.UI.DomElement.containsCssClass(t.get_element(),CssClasses.ruleAction)){RuleEditor.$27(this.actionEditors,t);Array.remove(this.actionEditors,t);EcpUtil.safeFocus(this.$b_4);this.onActionEditorsChanged()}else if(Sys.UI.DomElement.containsCssClass(t.get_element(),CssClasses.ruleException)){RuleEditor.$27(this.$H_4,t);Array.remove(this.$H_4,t);EcpUtil.safeFocus(this.$W_4)}var f=t.get_element();t.dispose();f.parentNode.removeChild(f);this.$2C_4()}}},validate:function(n){var t=!0;var f=0;var e=0;var o=!1;var s=!1;this.conditionEditors[0].validate(!0);this.actionEditors[0].validate(!0);for(var i=0;i<this.conditionEditors.length;i++)if(this.conditionEditors[i].get_hasSelection()){o=!0;this.conditionEditors[i].validateParameterEditors(!0)?f++:t=!1}o&&!this.conditionEditors[0].get_hasSelection()&&this.conditionEditors[0].setErrorState(!1);for(var r=0;r<this.actionEditors.length;r++)if(this.actionEditors[r].get_hasSelection()){s=!0;this.actionEditors[r].validateParameterEditors(!0)?e++:t=!1}!this.actionEditors[0].get_hasSelection()&&(s||this.allowNoActions)&&this.actionEditors[0].setErrorState(!1);for(var u=0;u<this.$H_4.length;u++)this.$H_4[u].get_hasSelection()&&(t=this.$H_4[u].validateParameterEditors(!0)?t:!1);(f<1||e<1&&!this.allowNoActions)&&(t=!1);return t},setControlInError:function(n,t){"Name"===n&&FieldValidationAssistant.get_instance().setTextboxErrorProperties(this.$U_4,t)},initializeApplyToAllMessageCondition:function(){var n={};n.DisplayText=n.NamingFormat=Strings.get_ApplyToAllMessages();n.Parameters=new Array(0);n.hasPermission=!0;n.DisplayedInSimpleMode=!0;return n},onActionEditorsChanged:function(){},initParametersPanel:function(){this.phrasesTable=document.createElement("TABLE");this.phrasesTable.setAttribute("cellPadding",0);this.phrasesTable.setAttribute("cellSpacing",0);this.phrasesTable.className=CssClasses.ruleParametersTable;this.$1Y_4.appendChild(this.phrasesTable);var n=document.createElement("COLGROUP");this.phrasesTable.appendChild(n);n.appendChild(document.createElement("COL"));this.$x_4=document.createElement("COL");n.appendChild(this.$x_4);n.appendChild(document.createElement("COL"));if(EcpUtil.isSafari()){this.$G_4=this.phrasesTable.insertRow(-1);this.$G_4.style.height="0px";this.$G_4.insertCell(-1);this.$G_4.insertCell(-1);this.$G_4.insertCell(-1)}this.$l_4=document.createElement("TD");this.$l_4.className="CaptionLabel";this.$l_4.colSpan=3;this.$l_4.innerHTML=this.$3b_4||Strings.get_DefaultRuleEditorCaption();this.phrasesTable.insertRow(-1).appendChild(this.$l_4);var t=document.createElement("TD");t.colSpan=2;t.innerHTML="<span id='txtRuleName_label' aria-hidden=\"false\">"+Strings.get_RuleNameTextBoxLabel()+"</span>";this.ruleNameLabelRow=this.phrasesTable.insertRow(-1);this.ruleNameLabelRow.insertCell(-1);this.ruleNameLabelRow.appendChild(t);var i=document.createElement("TD");i.colSpan=2;this.$U_4=document.createElement("input");this.$U_4.type="text";this.$U_4.id="txtRuleName";this.$U_4.name="ruleName";this.$U_4.className=CssClasses.ruleNameTextBox;this.$U_4.setAttribute("maxLength",this.$3J_4);i.appendChild(this.$U_4);this.$4G_4=this.phrasesTable.insertRow(-1);this.$4G_4.insertCell(-1);this.$4G_4.appendChild(i);var c=this.$2t_4||Strings.get_DefaultRuleConditionLabel();var l=RuleEditor.createEditorLabelCell(c,CssClasses.ruleConditionLabel,"ConditionEditor",2);this.conditionLabelRow=this.phrasesTable.insertRow(-1);this.conditionLabelRow.insertCell(-1);this.conditionLabelRow.appendChild(l);var r=document.createElement("TD");r.colSpan=2;this.$6_4=document.createElement("button");this.$6_4.className=CssClasses.messageTypeLaunchButton;this.$6_4.innerHTML=Strings.get_AddConditionButtonText();this.$6_4.id="addConditionButton";this.$6_4.setAttribute("onclick",GlobalVariables.doNothingScript);r.appendChild(this.$6_4);this.addConditionButtonRow=this.phrasesTable.insertRow(-1);this.addConditionButtonRow.insertCell(-1);this.addConditionButtonRow.appendChild(r);var a=this.$3U_4||Strings.get_DefaultRuleActionLabel();var v=RuleEditor.createEditorLabelCell(a,CssClasses.phrasesLabel,"ActionEditor",2);this.$2k_4=this.phrasesTable.insertRow(-1);this.$2k_4.insertCell(-1);this.$2k_4.appendChild(v);var u=document.createElement("TD");u.colSpan=2;this.$b_4=document.createElement("button");this.$b_4.className=CssClasses.messageTypeLaunchButton;this.$b_4.innerHTML=Strings.get_AddActionButtonText();this.$b_4.id="addActionButton";this.$b_4.setAttribute("onclick",GlobalVariables.doNothingScript);u.appendChild(this.$b_4);this.$1J_4=this.phrasesTable.insertRow(-1);this.$1J_4.insertCell(-1);this.$1J_4.appendChild(u);var y=this.$3p_4||Strings.get_DefaultRuleExceptionLabel();var p=RuleEditor.createEditorLabelCell(y,CssClasses.phrasesLabel,"ExceptionEditor",2);this.$1x_4=this.phrasesTable.insertRow(-1);this.$1x_4.insertCell(-1);this.$1x_4.appendChild(p);var f=document.createElement("TD");f.colSpan=2;this.$W_4=document.createElement("button");this.$W_4.className=CssClasses.messageTypeLaunchButton;this.$W_4.innerHTML=Strings.get_AddExceptionButtonText();this.$W_4.id="addExceptionButton";this.$W_4.setAttribute("onclick",GlobalVariables.doNothingScript);f.appendChild(this.$W_4);this.$16_4=this.phrasesTable.insertRow(-1);this.$16_4.insertCell(-1);this.$16_4.appendChild(f);var e=document.createElement("TD");e.colSpan=2;e.appendChild(this.$1c_4);var s=this.phrasesTable.insertRow(-1);s.insertCell(-1);s.appendChild(e);var o=document.createElement("TD");o.colSpan=2;o.appendChild(this.$Y_4);var h=this.phrasesTable.insertRow(-1);h.insertCell(-1);h.appendChild(o)},autoGenerateName:function(){for(var t=null,n=0;n<this.conditionEditors.length;n++)if(this.conditionEditors[n].validate(!1)){t=this.conditionEditors[n];break}return this.$4S_4(t)},createConditionEditor:function(n,t){this.conditionEditors.length>0&&RuleEditor.$1o(this.addConditionButtonRow,Strings.get_And());var i=this.$1p_4(n,this.$4_4,this.addConditionButtonRow,"ConditionEditor");i.set_value(t);i.addCssClass(CssClasses.ruleCondition);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),"ConditionEditor"+AriaUtil.associatedLabelSuffix);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),this.get_id()+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLabelID(i.$0_3.get_element(),AriaUtil.getFvaReaderSpanId(i.$0_3.get_element()));var u=this;i.$0_3.add_dropDown(function(n,t){RuleEditor.$2I(u.$4_4,u.conditionEditors,i);var f=u.conditionEditors.length>0&&u.conditionEditors[0]===i;var r=i.$0_3.findByValue(u.$2M_4);r.set_visible(f);r.set_enabled(u.conditionEditors.length===1)});var r=this;i.add_valueChanged(function(n,t){if(r.conditionEditors[0]===n){r.$3m_4&&r.$4S_4(r.conditionEditors[0]);r.$2r_4||(r.$2r_4=r.$4n_4());var u=i.$0_3.get_value()===r.$2M_4;_DomElement.toggelCssClass(r.$6_4,!u,CssClasses.messageTypeLaunchButton);_DomElement.toggelCssClass(r.$6_4,u,CssClasses.messageTypeLaunchButtonDisabled);r.$6_4.disabled=u;r.$2r_4.confirmMessage=u?Strings.get_ApplyAllMessagesWarning():"";r.$2r_4.confirmMessageTarget=""}});n&&!n.hasPermission&&i.set_disabled(!0);return i},switchMode:function(){var u=this.isSimpleMode?-1:0;_DomElement.toggelCssClass(this.$1J_4,this.isSimpleMode,CssClasses.hiddenCSS);this.$b_4.tabIndex=u;_DomElement.toggelCssClass(this.addConditionButtonRow,this.isSimpleMode,CssClasses.hiddenCSS);this.$6_4.tabIndex=u;if(this.isSimpleMode){_DomElement.toggelCssClass(this.$Y_4,this.$2h_4,CssClasses.hiddenCSS);Sys.UI.DomElement.addCssClass(this.$16_4,CssClasses.hiddenCSS);Sys.UI.DomElement.addCssClass(this.$1x_4,CssClasses.hiddenCSS);this.$W_4.tabIndex=-1;_DomElement.toggelCssClass(this.$1C_4.parentNode,!this.$2h_4,CssClasses.hiddenCSS);this.$1C_4.tabIndex=this.$2h_4?0:-1}else{Sys.UI.DomElement.addCssClass(this.$1C_4.parentNode,CssClasses.hiddenCSS);this.$1C_4.tabIndex=-1;Sys.UI.DomElement.removeCssClass(this.$Y_4,CssClasses.hiddenCSS);_DomElement.toggelCssClass(this.$16_4,this.$L_4.length<=0,CssClasses.hiddenCSS);_DomElement.toggelCssClass(this.$1x_4,this.$L_4.length<=0,CssClasses.hiddenCSS);this.$W_4.tabIndex=0}for(var t=0;t<this.conditionEditors.length;t++){this.conditionEditors[t].set_SimpleMode(this.isSimpleMode);RuleEditor.$2I(this.$4_4,this.conditionEditors,this.conditionEditors[t])}for(var i=0;i<this.actionEditors.length;i++){this.actionEditors[i].set_SimpleMode(this.isSimpleMode);this.updateActionItems(this.actionEditors[i])}for(var r=0;r<this.$H_4.length;r++){this.$H_4[r].set_SimpleMode(this.isSimpleMode);RuleEditor.$2I(this.$L_4,this.$H_4,this.$H_4[r])}this.$2C_4();if(!this.isSimpleMode)try{var n=AjaxControlToolkit.CommonToolkitScripts.getClientBounds();n.height=this.$2n_4<n.height?0:this.$2n_4-n.height;n.width=this.$2o_4<n.width?0:this.$2o_4-n.width;(n.height||n.width)&&window.resizeBy(n.width,n.height)}catch(f){}},updateActionItems:function(n){RuleEditor.$2I(this.$D_4,this.actionEditors,n)},$4R_4:function(){for(var n={},u=0;u<this.$f_4.length;u++)n[this.$f_4[u]]=!0;for(var t=0;t<this.$4_4.length;t++)this.$4_4[t].hasPermission=_Object.isNullOrUndefined(n[this.$4_4[t].Name]);for(var i=0;i<this.$D_4.length;i++)this.$D_4[i].hasPermission=_Object.isNullOrUndefined(n[this.$D_4[i].Name]);for(var r=0;r<this.$L_4.length;r++)this.$L_4[r].hasPermission=_Object.isNullOrUndefined(n[this.$L_4[r].Name]);_Object.isNullOrUndefined(n.Name)||(this.$U_4.disabled=!0);this.applyPermissionOnParameters(n)},applyPermissionOnParameters:function(n){},$3Z_4:function(n){var t=this.$X_4.get_width();var i=this.get_element().offsetWidth*75/100;t>i&&(t=i);this.$x_4.style.width=t+"px";EcpUtil.isSafari()&&this.$G_4&&(this.$G_4.cells[1].style.width=t+"px")},$4S_4:function(n){if(!n)return"";var t=n.getNamingText(this.$3J_4);this.$U_4.value=t;return t},$4n_4:function(){var n=BaseForm.getCurrentForm(this.get_element());return n?n.get_CommitButton():null},$1p_4:function(n,t,i,r){var u=document.createElement("TR");u.id=r+"_"+this.$49_4++;i.parentNode.insertBefore(u,i);return $create(RulePhraseEditor,{Phrase:n,AllPhrases:t,SimpleMode:this.isSimpleMode,WrapEditors:this.$1I_4},null,null,u)},createActionEditor:function(n,t){this.actionEditors.length>0&&RuleEditor.$1o(this.$1J_4,Strings.get_And());var i=this.$1p_4(n,this.$D_4,this.$1J_4,"ActionEditor");var r=this;i.add_valueChanged(function(n,t){r.onActionEditorsChanged()});i.set_value(t);i.addCssClass(CssClasses.ruleAction);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),"ActionEditor"+AriaUtil.associatedLabelSuffix);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),this.get_id()+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLabelID(i.$0_3.get_element(),AriaUtil.getFvaReaderSpanId(i.$0_3.get_element()));var u=this;i.$0_3.add_dropDown(function(n,t){u.updateActionItems(i)});n&&!n.hasPermission&&i.set_disabled(!0);return i},$4Y_4:function(n,t){this.$H_4.length>0&&RuleEditor.$1o(this.$16_4,Strings.get_Or());var i=this.$1p_4(n,this.$L_4,this.$16_4,"ExceptionEditor");i.set_value(t);i.addCssClass(CssClasses.ruleException);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),"ExceptionEditor"+AriaUtil.associatedLabelSuffix);AriaUtil.insertIDIntoAriaLabelledby(i.$0_3.get_element(),this.get_id()+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLabelID(i.$0_3.get_element(),AriaUtil.getFvaReaderSpanId(i.$0_3.get_element()));var r=this;i.$0_3.add_dropDown(function(n,t){RuleEditor.$2I(r.$L_4,r.$H_4,i)});n&&!n.hasPermission&&i.set_disabled(!0);return i},$2C_4:function(){this.conditionEditors.length>0&&this.conditionEditors[0].set_isRemovable(this.conditionEditors.length>1&&!this.conditionEditors[0].get_disabled());this.actionEditors.length>0&&this.actionEditors[0].set_isRemovable(this.actionEditors.length>1&&!this.actionEditors[0].get_disabled())}};function RuleEditorUtil(){}RuleEditorUtil.removeSiblings=function(n,t){while(n.nextSibling!==t)n.nextSibling.parentNode.removeChild(n.nextSibling)};function RulePhraseEditor(n){this.$$d_$5E_3=Function.createDelegate(this,this.$5E_3);this.$$d_$5v_3=Function.createDelegate(this,this.$5v_3);this.$2_3=new Array(0);RulePhraseEditor.initializeBase(this,[n])}RulePhraseEditor.getClickedLink=function(n){while(n&&n.tagName!=="A"&&n.parentNode)n=n.parentNode;return n&&n.tagName==="A"&&Sys.UI.DomElement.containsCssClass(n,"RuleRemoveButtonLink")?n:null};RulePhraseEditor.prototype={isDisabled:!1,parametersCell:null,$T_3:null,selectionCell:null,$3w_3:!0,$39_3:!0,$3G_3:!1,$1I_3:!1,$p_3:null,$0_3:null,$3_3:null,$2p_3:null,$Z_3:null,add_valueChanged:function(n){this.get_events().addHandler("ValueChanged",n)},remove_valueChanged:function(n){this.get_events().removeHandler("ValueChanged",n)},get_hasSelection:function(){return!!this.$0_3.get_value()},get_comboBox:function(){return this.$0_3},get_Phrase:function(){return this.$3_3},set_Phrase:function(n){this.$3_3=n;return n},get_AllPhrases:function(){return this.$2p_3},set_AllPhrases:function(n){this.$2p_3=n;return n},get_parameterEditors:function(){return this.$2_3},get_value:function(){for(var t={},n=0;n<this.$2_3.length;n++)t[this.$2_3[n].$1_3.Name]=this.$2_3[n].$A_3;return t},set_value:function(n){if(n)for(var t=0;t<this.$2_3.length;t++)this.$2_3[t].set_value(n[this.$2_3[t].$1_3.Name]);this.$Z_3=n||{};this.$3F_3();return n},get_displayTexts:function(){for(var t={},n=0;n<this.$2_3.length;n++)t[this.$2_3[n].$1_3.Name]=this.$2_3[n].getDisplayText(-1);return t},get_isRemovable:function(){return this.$3w_3},set_isRemovable:function(n){if(this.$3w_3!==n){this.$3w_3=n;_DomElement.toggelCssClass(this.$p_3,!n,CssClasses.hiddenAlways)}return n},get_WrapEditors:function(){return this.$1I_3},set_WrapEditors:function(n){this.$1I_3=n;return n},get_disabled:function(){return this.isDisabled},set_disabled:function(n){if(this.get_disabled()!==n){this.set_isRemovable(!n);this.isDisabled=n;this.$0_3.set_disabled(!0);if(n)for(var t=0;t<this.$2_3.length;t++)this.$2_3[t].set_disabled(!0)}return n},get_SimpleMode:function(){return this.$39_3},set_SimpleMode:function(n){if(this.$39_3!==n){this.$39_3=n;this.get_isInitialized()&&this.$52_3()}return n},initialize:function(){var i=document.createElement("TD");this.$p_3=document.createElement("A");this.$p_3.href="#";this.$p_3.setAttribute("onclick",GlobalVariables.doNothingScript);this.$p_3.className=CssClasses.ruleRemoveButtonLink;this.$p_3.setAttribute("alt",Strings.get_RemoveAction());this.$p_3.setAttribute("title",Strings.get_RemoveAction());var n=document.createElement("img");n.src=EcpUtil.getSpriteImageSrc();n.alt=Strings.get_RemoveAction();n.title=Strings.get_RemoveAction();n.className=CssClasses.ruleRemoveButtonImageDiv+" CommandSprite DeleteButtonSmall";this.$p_3.appendChild(n);var t=document.createElement("span");t.title=Strings.get_RemoveAction();t.innerHTML=AriaUtil.closeIconFont;t.className="RuleRemoveButtonImageAlter";this.$p_3.appendChild(t);i.appendChild(this.$p_3);this.get_element().appendChild(i);this.selectionCell=document.createElement("TD");this.get_element().appendChild(this.selectionCell);if(this.$1I_3){this.selectionCell.style.verticalAlign="top";i.style.verticalAlign="top"}this.parametersCell=document.createElement("TD");this.get_element().appendChild(this.parametersCell);this.initializeSelectionCell();EcpControl.prototype.initialize.call(this);this.set_disabled(!1);ControlSizeMonitor.registerControl(this.parametersCell,this.$$d_$5v_3)},getNamingText:function(n){var t="";if(this.$3_3&&this.$3_3.NamingFormat){t=this.$3_3.NamingFormat;if(this.$2_3.length){for(var i=new Array(5),r=0;r<this.$2_3.length;r++)this.$2_3[r].$A_3&&(i[r]=this.$2_3[r].getDisplayText(2));t=String.format(this.$3_3.NamingFormat,i[0],i[1],i[2],i[3],i[4]);t.length>n-3?t=t.substring(0,n-3)+"...":!_Object.isNullOrUndefined(this.$2_3[0].$A_3)&&Array.isInstanceOfType(this.$2_3[0].$A_3)&&this.$2_3[0].$A_3.length>2&&(t+="...")}else{t=this.$3_3.NamingFormat;t.length>n-3&&(t=t.substring(0,n-3)+"...")}}t=t.trim();return t},validate:function(n){var t=!0;if(!this.get_hasSelection()){n&&this.$0_3&&this.$0_3.setErrorState(!0);t=!1}t=this.validateParameterEditors(n)?t:!1;return t},validateParameterEditors:function(n){for(var i=!0,t=0;t<this.$2_3.length;t++)if(_Object.isNullOrUndefined(this.$2_3[t].$A_3)){n&&this.$2_3[t].setErrorState(!0);i=!1}return i},setErrorState:function(n){this.$0_3&&this.$0_3.setErrorState(n);for(var t=0;t<this.$2_3.length;t++)this.$2_3[t].setErrorState(n)},isDirty:function(){var n=this.get_value();for(var t in n){var i={key:t,value:n[t]};if(i.value!==this.$Z_3[i.key])return!0}return!1},forceDirty:function(){this.$Z_3={}},showParameterEditor:function(){this.$2_3.length===1&&this.$2_3[0].showEditor()},setValueAndSupressEditorPopup:function(n,t){this.$3G_3=!0;var i=this.$Z_3;this.$0_3.set_value(n);this.set_value(t);this.$Z_3=i;this.$3G_3=!1},dispose:function(){ControlSizeMonitor.unregisterControl(this.parametersCell,this.$$d_$5v_3);this.$0_3&&this.$0_3.dispose();for(var n=0;n<this.$2_3.length;n++)this.$2_3[n].dispose();EcpControl.prototype.dispose.call(this)},$3F_3:function(){var n=this.get_events().getHandler("ValueChanged");n&&!this.$3G_3&&n(this,Sys.EventArgs.Empty)},$3S_3:function(){this.$T_3&&(this.$T_3.title=this.$T_3.scrollWidth>this.$T_3.clientWidth?EcpUtil.getInnerText(this.$T_3):"")},initializeSelectionCell:function(){this.$52_3();this.$0_3.addToDOMElement(this.selectionCell);this.$0_3.add_valueChanged(this.$$d_$5E_3);this.$0_3.set_value(this.$3_3)},createParameterEditors:function(){if(this.$3_3.Parameters&&this.$3_3.Parameters.length>0){this.$T_3=document.createElement("DIV");this.parametersCell.appendChild(this.$T_3);this.$T_3.className=CssClasses.get_ruleParameterEditor();this.$1I_3&&(this.$T_3.style.whiteSpace="normal");if(this.$3_3.Parameters.length>0&&!this.$3_3.ExplanationText)for(var r=0;r<this.$3_3.Parameters.length;r++){var f=document.createElement("SPAN");this.$T_3.appendChild(f);var e=$create(DataBinder.getPropertyValue(window.self,this.$3_3.Parameters[r].EditorType),{Parameter:this.$3_3.Parameters[r],PhraseEditor:this},null,null,f);e.set_disabled(this.get_disabled());Array.add(this.$2_3,e)}else if(this.$3_3.Parameters.length>=1){var n="<SPAN>locator</SPAN>";this.$T_3.innerHTML=String.format(this.$3_3.ExplanationText,n,n,n,n,n);for(var u=this.$T_3.getElementsByTagName("SPAN"),o=new Array(u.length),t=0;t<u.length;t++){u[t].innerHTML="";o[t]=u[t]}for(var i=0;i<this.$3_3.Parameters.length;i++){var s=$create(DataBinder.getPropertyValue(window.self,this.$3_3.Parameters[i].EditorType),{Parameter:this.$3_3.Parameters[i],PhraseEditor:this},null,null,o[i]);s.set_disabled(this.get_disabled());Array.add(this.$2_3,s)}}}},$52_3:function(){var i=null;var u=null;if(this.$0_3){i=this.$0_3.get_value();u=this.get_value();this.$0_3.removeAllItems();this.$0_3.addItem(null,ComboBoxItem.createInstance(Strings.get_SelectOne(),null))}else this.$0_3=ComboBox.createInstance(Strings.get_SelectOne());for(var r=0;r<this.$2p_3.length;r++){var n=this.$2p_3[r];if(this.$39_3){if(n.DisplayedInSimpleMode){var f=n.DisplayText;var e=ComboBoxItem.createInstance(f,n);this.$0_3.addItem(null,e)}}else{var o=n.FlyOutText||n.DisplayText;var t=null;if(n.GroupText){t=this.$0_3.findByText(n.GroupText);if(!t){t=ComboBoxItem.createInstance(n.GroupText,null);this.$0_3.addItem(null,t)}}var s=ComboBoxItem.createInstance(o,n);this.$0_3.addItem(t,s)}}i&&this.setValueAndSupressEditorPopup(i,u)},$5D_3:function(){for(var n=0;n<this.$2_3.length;n++)this.$2_3[n].dispose();this.$2_3=new Array(0);this.parametersCell.innerHTML="";this.$T_3=null},$5E_3:function(n,t){this.$5D_3();this.$0_3.setErrorState(!1);if(this.$0_3.get_value()){this.$3_3=this.$0_3.get_value();this.$0_3.set_text(this.$3_3.DisplayText);this.$0_3.set_textCssClass(CssClasses.ruleComboBoxWithValue);this.createParameterEditors();this.$3G_3||(this.get_isInitialized()&&this.$2_3.length>0?this.$0_3.get_keyPressChangeComboxItem()?this.$0_3.set_keyPressChangeComboxItem(!1):this.showParameterEditor():this.$2_3.length||this.$3F_3())}else{this.$3_3=null;this.$0_3.set_text(Strings.get_SelectOne());this.$0_3.set_textCssClass("")}},$5v_3:function(n){this.$3S_3()}};function RulePhraseParameterEditor(n){this.$$d_closeDialogCallBack=Function.createDelegate(this,this.closeDialogCallBack);this.$$d_$5e_3=Function.createDelegate(this,this.$5e_3);RulePhraseParameterEditor.initializeBase(this,[n])}RulePhraseParameterEditor.prototype={$I_3:null,$3O_3:null,$38_3:!1,delimeterString:null,initialize:function(){EcpControl.prototype.initialize.call(this);this.$1_3.NoSelectionText||(this.$1_3.NoSelectionText=Strings.get_SelectOneLink());this.delimeterString=this.$1_3.UseAndDelimiter?Strings.get_And():Strings.get_Or();this.$3O_3=document.createElement("SPAN");this.get_element().appendChild(this.$3O_3);this.$I_3=document.createElement("A");this.$I_3.className=CssClasses.rulePhraseParameterLink;this.get_element().appendChild(this.$I_3);$addHandler(this.$I_3,"click",this.$$d_$5e_3);this.$I_3.setAttribute("href",GlobalVariables.emptyHref);this.$56_3()},dispose:function(){if(this.$I_3){$removeHandler(this.$I_3,"click",this.$$d_$5e_3);this.$I_3=null}EcpControl.prototype.dispose.call(this)},setErrorState:function(n){n&&!Sys.UI.DomElement.containsCssClass(this.$I_3,CssClasses.get_withInvalidValue())?Sys.UI.DomElement.addCssClass(this.$I_3,CssClasses.get_withInvalidValue()):!n&&Sys.UI.DomElement.containsCssClass(this.$I_3,CssClasses.get_withInvalidValue())&&Sys.UI.DomElement.removeCssClass(this.$I_3,CssClasses.get_withInvalidValue())},showEditor:function(){var n=this.createEditor();if(n){Dialog.isInstanceOfType(n)&&DialogManager.focusControlAfterClose(this.$I_3);n.showDialog(this.$1_3.DialogTitle,this.convertParameterValue(this.$A_3,!0),this.$$d_closeDialogCallBack)}},closeDialogCallBack:function(n,t){t&&this.set_value(this.convertParameterValue(n,!1))},createEditor:function(){MessageBox.showMessage("The editor is not implemented yet.",MessageBoxType.error);return null},formatValue:function(n){return n.toString()},getDisplayText:function(n){if(_Object.isNullOrUndefined(this.$A_3))return"";else if(Array.isInstanceOfType(this.$A_3)){var t=new Sys.StringBuilder;var r=this.$A_3;(n===-1||n>r.length)&&(n=r.length);for(var i=0;i<n;i++){if(i>0){t.append(" ");t.append(this.delimeterString);t.append(" ")}t.append("'");t.append(this.formatValue(r[i]));t.append("'")}return t.toString()}return this.formatValue(this.$A_3)},convertParameterValue:function(n,t){return n},$5e_3:function(n){this.$38_3||this.showEditor();n.preventDefault()},$56_3:function(){if((this.$A_3||Number.isInstanceOfType(this.$A_3))&&(!Array.isInstanceOfType(this.$A_3)||this.$A_3.length)){this.$3O_3.innerHTML="";this.$I_3.innerHTML=EcpUtil.htmlEncode(this.getDisplayText(-1))}else{this.$3O_3.innerHTML=this.$1_3.RequiredField?"*":"";this.$I_3.innerHTML=this.$1_3.NoSelectionText}this.$26_3&&this.$26_3.$3S_3()},get_Parameter:function(){return this.$1_3},set_Parameter:function(n){this.$1_3=n;return n},$1_3:null,get_PhraseEditor:function(){return this.$26_3},set_PhraseEditor:function(n){this.$26_3=n;return n},$26_3:null,get_disabled:function(){return this.$38_3},set_disabled:function(n){if(this.$38_3!==n){this.$38_3=n;_DomElement.toggelCssClass(this.$I_3,n,CssClasses.linkDisabled);this.$I_3.href=n?"":"javascript:void(0);";this.$I_3.tabIndex=n?-1:0}return n},get_value:function(){return this.$A_3},set_value:function(n){this.setErrorState(!1);this.$A_3=n;this.$56_3();this.$26_3&&this.$26_3.$3F_3();return n},$A_3:null};function StringArrayParameterEditor(n){StringArrayParameterEditor.initializeBase(this,[n])}StringArrayParameterEditor.prototype={$F_4:null,createEditor:function(){var t=EntryEditors.getEditor("StringArrayModalEditor");var n=this.$1_3;this.$F_4=t.$F_2;this.$F_4.set_maxLength(n.MaxLength);this.$F_4.$2Q_4=n.DuplicateHandlingType;this.$F_4.set_ValidationExpression(n.ValidationExpression?new Function("$_",n.ValidationExpression):null);this.$F_4.$3T_4=n.ValidationErrorMessage||"";this.$F_4.$C_4.get_InputTextBox().set_inputWaterMarkText(n.InputWaterMarkText||"");return t},convertParameterValue:function(n,t){return t?_Object.isNullOrUndefined(n)?new Array(0):n:n.length?EcpUtil.cloneDataObject(n):null},closeDialogCallBack:function(n,t){RulePhraseParameterEditor.prototype.closeDialogCallBack.call(this,n,t);this.$F_4.restoreStatus()}};function StringParameterEditor(n){StringParameterEditor.initializeBase(this,[n])}StringParameterEditor.prototype={createEditor:function(){var n=this.$1_3.MultiLine?EntryEditors.getEditor("MultilineStringModalEditor"):EntryEditors.getEditor("StringModalEditor");var t=n.$F_2;t.set_maxLength(this.$1_3.MaxLength);t.$2J_4=this.$1_3.ValidatingExpression;return n},formatValue:function(n){return"'"+n+"'"},convertParameterValue:function(n,t){return t?_Object.isNullOrUndefined(n)?this.$1_3.DefaultText:n:n===""?null:n}};function ADAttributeParameterEditor(n){ADAttributeParameterEditor.initializeBase(this,[n])}ADAttributeParameterEditor.prototype={createEditor:function(){return EntryEditors.getEditor("ADAttributeModalEditor")},convertParameterValue:function(n,t){if(t){var u=n;if(u&&u.length>0){for(var f=new Array(u.length),i=0;i<u.length;i++){f[i]=new NamedValue;var o=u[i].split(":",2);f[i].Identity="Index_"+i;f[i].Name=o[0];f[i].Value=o[1]}return f}}else{var r=n;if(r&&r.length>0){for(var s=new Array(r.length),e=0;e<r.length;e++)s[e]=r[e].Name+":"+r[e].Value;return s}}return n}};function CallerIdsParameterEditor(n){CallerIdsParameterEditor.initializeBase(this,[n])}CallerIdsParameterEditor.prototype={$50_4:null,createEditor:function(){var n=EntryEditors.getEditor("CallerIdsEditor");this.$50_4=n.$F_2.$13_4;return n},closeDialogCallBack:function(n,t){RulePhraseParameterEditor.prototype.closeDialogCallBack.call(this,n,t);this.$50_4.restoreStatus()},formatValue:function(n){var t=n;switch(t.CallerIdType){case 1:return t.PhoneNumber;case 2:case 3:case 5:return _String.isNullOrEmpty(t.DisplayName)?Strings.get_GalOrPersonalContactText():t.DisplayName;case 4:return Strings.get_DefaultContactsFolderText();default:return _String.empty}}};function TimePeriodParameterEditor(n){TimePeriodParameterEditor.initializeBase(this,[n])}TimePeriodParameterEditor.prototype={createEditor:function(){return EntryEditors.getEditor("TimePeriodEditor")},formatValue:function(n){var t=n;var i=t.TimeOfDayType;switch(i){case 1:return Strings.get_WorkingHoursText();case 2:return Strings.get_OutsideWorkingHoursText();case 3:return Strings.get_CustomPeriodText();default:return null}}};function ExtensionsDialedParameterEditor(n){ExtensionsDialedParameterEditor.initializeBase(this,[n])}ExtensionsDialedParameterEditor.prototype={createEditor:function(){return EntryEditors.getEditor("ExtensionsDialedEditor")}};function KeyMappingsParameterEditor(n){KeyMappingsParameterEditor.initializeBase(this,[n])}KeyMappingsParameterEditor.prototype={createEditor:function(){return EntryEditors.getEditor("KeyMappingsEditor")},formatValue:function(n){var t=n;return t.Key.toString()==="10"?Strings.get_KeyMappingVoiceMailDisplayText():String.format(Strings.get_KeyMappingDisplayTextFormat(),t.Context,t.Key.toString(),KeyMapping.getKeyMappingTypeDisplay(t.KeyMappingType,t.TransferToNumber,t.TransferToGALContactDisplayName))}};function EnumParameterEditor(n){EnumParameterEditor.initializeBase(this,[n])}EnumParameterEditor.prototype={createEditor:function(){return EntryEditors.getEditor("EnumComboBoxModalEditor")},formatValue:function(n){if(n)for(var i=this.$1_3.Values,t=0;t<i.length;t++)if(i[t].Value===n.toString())return i[t].DisplayText;return RulePhraseParameterEditor.prototype.formatValue.call(this,n)},convertParameterValue:function(n,t){if(t){var i={};i.Selected={};i.IsMultiSelect=this.$1_3.IsFlags;if(!EcpUtil.isNullOrEmpty(n)&&!i.IsMultiSelect)for(var f=this.$1_3.Values,o=f.length,r=0;r<o;++r){var e=f[r];if(e.Value.toLowerCase()===n.toLowerCase()){n=e.Value;break}}i.Selected.Value=n?n.toString():this.$1_3.DefaultValue?this.$1_3.DefaultValue.Value:null;i.Options=this.$1_3.Values;for(var u=0;u<i.Options.length;u++)if(i.Options[u].Value===i.Selected.Value)return i;i.Selected.DisplayText=i.Selected.Value;return i}else return n.Selected.Value}};function NumberEnumParameterEditor(n){NumberEnumParameterEditor.initializeBase(this,[n])}function NumberParameterEditor(n){NumberParameterEditor.initializeBase(this,[n])}NumberParameterEditor.prototype={createEditor:function(){var n=EntryEditors.getEditor("NumberModalEditor");var t=n.$F_2;t.set_inputBounds([this.$1_3.MinValue,this.$1_3.MaxValue]);t.$2x_6=this.$1_3.DefaultValue;return n},convertParameterValue:function(n,t){return t?_Object.isNullOrUndefined(n)?this.$1_3.DefaultValue:n:n===""?null:n}};function ByteQuantifiedSizeParameterEditor(n){ByteQuantifiedSizeParameterEditor.initializeBase(this,[n])}ByteQuantifiedSizeParameterEditor.prototype={formatValue:function(n){for(var f=parseFloat(n),t=f,u=1024,i=this.$1_3,r=0;r<i.Unit.length-1;r++)if(t<u)return"'"+String.format(i.Unit[r],t.toFixed(2))+"'";else t=t/u;return"'"+String.format(i.Unit[i.Unit.length-1],t.toFixed(2))+"'"}};function EnhancedEnumParameterEditor(n){EnhancedEnumParameterEditor.initializeBase(this,[n])}EnhancedEnumParameterEditor.prototype={createEditor:function(){var i=EntryEditors.getEditor("EnhancedEnumComboBoxModalEditor");var n=i.$F_2;var t=this.$1_3;n.set_description(t.DialogLabel);n.servicePath=t.ServicePath;n.noSelectionWarningText=t.NoSelectionWarningText;return i},formatValue:function(n){if(n)if(n.DisplayName)return n.DisplayName;else if(String.isInstanceOfType(n))return n.toString();return EnumParameterEditor.prototype.formatValue.call(this,n)},convertParameterValue:function(n,t){if(t){var i={};var f=this.$1_3;if(n){var r={};r.DisplayText=n.DisplayName;r.Value=n.RawIdentity;i.Selected=r}else i.Selected=f.DefaultValue;i.Options=null;return i}else{var u=n.Selected;return new Identity(u.Value,u.DisplayText)}}};function FolderParameterEditor(n){FolderParameterEditor.initializeBase(this,[n])}FolderParameterEditor.prototype={createEditor:function(){var n=EntryEditors.getEditor("RulesFolderPicker");if(!n){n=new RulesFolderPicker;EntryEditors.register("RulesFolderPicker",n)}return n},formatValue:function(n){return n.DisplayName}};function OUPickerParameterEditor(n){OUPickerParameterEditor.initializeBase(this,[n])}OUPickerParameterEditor.prototype={createEditor:function(){var n=EntryEditors.getEditor("OUPicker");if(!n){var t={};t.DialogPickerServiceUrl=this.$1_3.ServiceUrl;n=OUPicker.Create(t);EntryEditors.register("OUPicker",n)}return n},formatValue:function(n){return n.DisplayName}};function ObjectParameterEditor(n){ObjectParameterEditor.initializeBase(this,[n])}ObjectParameterEditor.prototype={formatValue:function(n){var t=n.Identity;return _Object.isNullOrUndefined(t)?n.DisplayName:t.DisplayName},createEditor:function(){var n=ObjectArrayParameterEditor.prototype.createEditor.call(this);n.$2g_6=!0;n.set_ValueProperty(this.$1_3.ValueProperty);return n},convertParameterValue:function(n,t){return t?[n]:n&&Array.isInstanceOfType(n)?n[0]:n}};function ObjectArrayParameterEditor(n){ObjectArrayParameterEditor.initializeBase(this,[n])}ObjectArrayParameterEditor.prototype={formatValue:function(n){return n.DisplayName},createEditor:function(){var n=EntryEditors.getEditor("ObjectPicker");n.set_PickerFormUrl(this.$1_3.PickerUrl);return n}};function PeopleParameterEditor(n){PeopleParameterEditor.initializeBase(this,[n])}PeopleParameterEditor.prototype={createEditor:function(){var n=EntryEditors.getEditor("PeoplePicker");n.$14_6=this.$1_3.PickerType;return n}};function ObjectsParameterEditor(n){ObjectsParameterEditor.initializeBase(this,[n])}ObjectsParameterEditor.prototype={createEditor:function(){var n=EntryEditors.getEditor("ObjectPicker");n.$2g_6=!1;n.set_PickerFormUrl(this.$1_3.PickerUrl);n.set_ValueProperty(this.$1_3.ValueProperty);n.set_DialogHeight(this.$1_3.DialogHeight);n.set_DialogWidth(this.$1_3.DialogWidth);return n},convertParameterValue:function(n,t){if(t&&n)return null;else if(n){for(var r=n,u=[],f=r.length,i=0;i<f;i++)Array.add(u,r[i][this.$1_3.ValueProperty.toString()]);return u}else return n},formatValue:function(n){return n.toString()}};function NumberRangeParameterEditor(n){NumberRangeParameterEditor.initializeBase(this,[n])}NumberRangeParameterEditor.prototype={createEditor:function(){var n=EntryEditors.getEditor("NumberRangeModalEditor");n.$F_2.set_inputBounds([this.$1_3.MinValue,this.$1_3.MaxValue]);return n},convertParameterValue:function(n,t){if(t){if(_Object.isNullOrUndefined(n)){var i={};i.AtLeast=i.AtMost=0;n=i}return n}else{var r=!n.AtLeast&&!n.AtMost;return r?null:n}},formatValue:function(n){var t=n;var i="";t&&(t.AtLeast?i=String.format(this.$1_3.AtLeastAtMostDisplayTemplate,t.AtLeast,t.AtMost):t.AtMost&&(i=String.format(this.$1_3.AtMostOnlyDisplayTemplate,t.AtMost)));return i}};function DateRangeParameterEditor(n){DateRangeParameterEditor.initializeBase(this,[n])}DateRangeParameterEditor.prototype={$4b_4:null,createEditor:function(){var n=EntryEditors.getEditor("DateRangeModalEditor");this.$4b_4=n.$F_2;return n},convertParameterValue:function(n,t){if(t){if(_Object.isNullOrUndefined(n)){var i={};i.BeforeDate=i.AfterDate=null;n=i}return n}else{var r=!n.BeforeDate&&!n.AfterDate;return r?null:n}},formatValue:function(n){var t=n;var i="";var r="";var u="";if(t){t.BeforeDate&&(i=String.format(this.$1_3.BeforeDateDisplayTemplate,t.BeforeDate.DisplayName));t.AfterDate&&(u=String.format(this.$1_3.AfterDateDisplayTemplate,t.AfterDate.DisplayName));t.BeforeDate&&t.AfterDate&&(r=Strings.get_And())}return(u+" "+r+" "+i).trim()},closeDialogCallBack:function(n,t){RulePhraseParameterEditor.prototype.closeDialogCallBack.call(this,n,t);this.$4b_4.unSelectAll()}};function HiddenParameterEditor(n){HiddenParameterEditor.initializeBase(this,[n])}HiddenParameterEditor.prototype={initialize:function(){RulePhraseParameterEditor.prototype.initialize.call(this);this.get_element().style.display="none";this.set_value(this.$1_3.Value)},createEditor:function(){return null}};function JournalRuleScopeParameterEditor(n){JournalRuleScopeParameterEditor.initializeBase(this,[n])}JournalRuleScopeParameterEditor.prototype={createEditor:function(){return null}};function DLPParameterEditor(n){DLPParameterEditor.initializeBase(this,[n])}DLPParameterEditor.prototype={createEditor:function(){return EntryEditors.getEditor("DLPModalEditor")},convertParameterValue:function(n,t){if(_Object.isNullOrUndefined(n))return n;if(t){for(var s=[],h=n,d=h.length,i=0;i<d;++i){for(var g=h[i],c={},l=g,nt=l.length,r=0;r<nt;++r){var a=l[r];var u=a.Value;_Object.isNullOrUndefined(u)&&(u=null);c[a.Key.toString()]=u}Array.add(s,c)}return s}else{var v=n;if(!v.length)return null;for(var y=[],p=v,tt=p.length,f=0;f<tt;++f){var it=p[f];var w=[];var b=it;for(var k in b){var e={key:k,value:b[k]};if(!_Object.isNullOrUndefined(e.value)){var o={};o.Key=e.key;o.Value=e.value;Array.add(w,o)}}Array.add(y,w)}return y}},formatValue:function(n){for(var i=new Sys.StringBuilder,r={},u=n,e=u.length,t=0;t<e;++t){var f=u[t];r[f.Key.toString()]=f.Value}var o=this.$1_3.ClassificationNameKey;i.appendLine(String.format("{0}",r[o].toString()));return i.toString()}};function SenderNotifyParameterEditor(n){SenderNotifyParameterEditor.initializeBase(this,[n])}SenderNotifyParameterEditor.prototype={createEditor:function(){return EntryEditors.getEditor("SenderNotifyEditor")},formatValue:function(n){for(var r=n,i=this.$1_3.Values,t=0;t<i.length;t++)if(i[t].Value===r.NotifySender)return i[t].DisplayText;return RulePhraseParameterEditor.prototype.formatValue.call(this,n)}};function IncidentReportContentParameterEditor(n){IncidentReportContentParameterEditor.initializeBase(this,[n])}IncidentReportContentParameterEditor.prototype={createEditor:function(){return EntryEditors.getEditor("IncidentReportContentEditor")},getDisplayText:function(n){return Strings.get_IncidentReportContentCustom()},convertParameterValue:function(n,t){if(t||_Object.isNullOrUndefined(n))if(!_Object.isNullOrUndefined(n)&&t){var i=n;return i.join(",")}else return n;else return n.split(",")}};function UpdateRuleItem(n,t){t.get_item().get_dataObject().Supported||Sys.UI.DomElement.addCssClass(t.get_item().get_element(),CssClasses.disabledListViewItem)}function SenderNotifyEditControl(n){this.$$d_$5S_4=Function.createDelegate(this,this.$5S_4);SenderNotifyEditControl.initializeBase(this,[n])}SenderNotifyEditControl.prototype={$4I_4:null,$4E_4:null,$2A_4:null,$1a_4:null,get_SenderNotifyDropdownListID:function(){return this.$4I_4},set_SenderNotifyDropdownListID:function(n){this.$4I_4=n;return n},get_RejectMessageTextboxID:function(){return this.$4E_4},set_RejectMessageTextboxID:function(n){this.$4E_4=n;return n},initialize:function(){EcpControl.prototype.initialize.call(this);this.$1a_4=EcpControl.fromElement($get(this.$4E_4));this.$2A_4=EcpControl.fromElement($get(this.$4I_4));this.$2A_4.add_propertyChanged(this.$$d_$5S_4)},$5S_4:function(n,t){this.$1a_4.set_enabled(this.$4h_4(this.$2A_4.get_value()))},$4h_4:function(n){return n!=="NotifyOnly"},get_value:function(){var n={};n.NotifySender=this.$2A_4.get_value();n.RejectMessage=this.$1a_4.get_enabled()?this.$1a_4.get_text():null;return n},set_value:function(n){if(_Object.isNullOrUndefined(n))this.$1a_4.set_enabled(!1);else{var t=n;this.$2A_4.set_value(t.NotifySender.toString());_Object.isNullOrUndefined(t.RejectMessage)||this.$1a_4.set_text(t.RejectMessage.toString());this.$1a_4.set_enabled(this.$4h_4(this.$2A_4.get_value()))}return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null};function SimpleEntryEditor(){this.$$d_$4v_2=Function.createDelegate(this,this.$4v_2);this.$$d_$4i_2=Function.createDelegate(this,this.$4i_2);this.$$d_$5x_2=Function.createDelegate(this,this.$5x_2);this.$30_2=DialogButton.get_okCancel();SimpleEntryEditor.initializeBase(this)}SimpleEntryEditor.prototype={$F_2:null,$2N_2:null,$Z_2:null,$4L_2:"",$1K_2:null,$3i_2:null,$46_2:"",$3o_2:null,$47_2:null,$1P_2:null,$1O_2:null,$3v_2:!1,$37_2:!1,$2j_2:0,$1v_2:null,$4M_2:null,$3f_2:null,get_Width:function(){return this.$2j_2},set_Width:function(n){this.$2j_2=n;return n},get_EditControlID:function(){return this.$1v_2},set_EditControlID:function(n){this.$1v_2=n;return n},get_TypeName:function(){return this.$4M_2},set_TypeName:function(n){this.$4M_2=n;return n},get_contentHtml:function(){return this.$3i_2},get_className:function(){return this.$3f_2},get_editControl:function(){return this.$F_2},get_$3a_2:function(){return this.$2j_2<0},initialize:function(){Sys.Component.prototype.initialize.call(this);if(!this.$1v_2)throw Error.argument("EditControlID should not be null or empty string");this.$F_2=$find(this.$1v_2);this.$2N_2=$get(this.$1v_2);EntryEditors.register(this.$4M_2,this)},showDialog:function(n,t,i){this.$4L_2=n;this.$Z_2=t;this.$1K_2=i;var r=$get(this.$1v_2+AriaUtil.associatedLabelSuffix);EcpUtil.setInnerText(r,n);DialogManager.show(this)},onInit:function(n){Dialog.prototype.onInit.call(this,n);this.$46_2=$get(n.get_id()).style.width;$get(n.get_id()).style.width=this.get_$3a_2()?"":this.$2j_2+"em";this.$3f_2=this.$2j_2<0?"autoWidth formlet":"formlet";var t=this.$5X_2(this.$30_2);this.$3i_2=String.format(SimpleEntryEditor.$4f,n.get_id(),this.$4L_2,Strings.get_Close(),t,EcpUtil.getSpriteImageSrc())},onPreShow:function(){Dialog.prototype.onPreShow.call(this);this.$47_2=this.$2N_2.parentNode;this.$1O_2=$get(this.get_modalDialog().get_id()+"_ctlDiv");this.$1O_2.appendChild(this.$2N_2);this.$37_2=!1},onShowing:function(){Dialog.prototype.onShowing.call(this);this.$1P_2=$get(this.get_modalDialog().get_id()+"_errorDiv");this.$4i_2(!0);this.$F_2.set_setErrorsWarningsDelegate(this.$$d_$5x_2);this.$F_2.set_enableOkButtonDelegate(this.$$d_$4i_2);this.$F_2.set_value(this.$Z_2);if(this.get_$3a_2()){this.$4v_2(null);ControlSizeMonitor.registerControl(this.$1O_2,this.$$d_$4v_2)}},onShown:function(){Dialog.prototype.onShown.call(this);this.$5y_2()},onButtonClicked:function(n){if(n===ModalDialogResult.OK){this.$F_2.validate(!0);if(this.$3o_2)return}this.get_$3a_2()&&ControlSizeMonitor.unregisterControl(this.$1O_2,this.$$d_$4v_2);_Object.isUndefined(document.selection)||document.selection.empty();this.$1K_2&&this.$1K_2(this.$F_2.get_value(),n===ModalDialogResult.OK);this.$47_2.appendChild(this.$2N_2);$get(this.get_modalDialog().get_id()).style.width=this.$46_2;this.get_modalDialog().close();this.onClose()},onClose:function(){this.$37_2=!0;this.$4L_2="";this.$Z_2=null;this.$1K_2=null;this.$3i_2=null;this.$47_2=null;this.$1P_2=null;this.$1O_2=null;this.$3o_2=null;this.$46_2="";this.$3f_2="formlet";Dialog.prototype.onClose.call(this)},$5X_2:function(n){var i="";if(n.length>0){this.set_dialogResultOnEnter(n[0].get_type());for(var t=0;t<n.length;t++)i+=String.format(SimpleEntryEditor.$4T,this.$3r_2(n[t]),n[t].get_type(),n[t].get_text())}return i},$3r_2:function(n){return this.get_modalDialog().get_id()+"_"+n.get_type()},$5y_2:function(){var n=_DomElement.firstFocusableField(this.$2N_2);if(!n)for(var t=null,i=0;i<this.$30_2.length;i++){t=$get(this.$3r_2(this.$30_2[i]),this.get_modalDialog().get_dialogFrame());if(t&&!t.disabled){n=t;break}}n||(n=this.get_modalDialog().get_dialogFrame());if(n){var r=this;window.setTimeout(function(){EcpUtil.isTextbox(n)?n.select():n.focus()},0)}},$4v_2:function(n){if(!this.$3v_2){this.$3v_2=!0;if(this.$1P_2&&this.$1O_2){var t=this.$1O_2.offsetWidth-_DomElement.getPad(this.$1P_2,1,0,!1);this.$1P_2.style.width=t+"px"}this.get_modalDialog().reLayout();this.$3v_2=!1}},$5x_2:function(n,t){if(!this.$37_2){var i=EcpUtil.combineMsgsToHtml(n);t&&(this.$3o_2=n);this.$1P_2.childNodes[0].innerHTML=i;this.$1P_2.style.display=n?"":"none"}},$4i_2:function(n){if(!this.$37_2){var t=null;t=$get(this.$3r_2(DialogButton.get_OK()[0]),this.get_modalDialog().get_dialogFrame());t&&(t.disabled=!n)}}};function StringEditControl(n){StringEditControl.initializeBase(this,[n])}StringEditControl.prototype={get_TextBox:function(){return this.inputElement},set_TextBox:function(n){this.inputElement=n;return n},initialize:function(){StringEditControlBase.prototype.initialize.call(this)},setError:function(n){this.get_setErrorsWarningsDelegate()&&this.get_setErrorsWarningsDelegate()(n,!0)},get_value:function(){return this.get_TextBox().value},set_value:function(n){this.get_TextBox().value=n.toString();StringEditControlBase.prototype.onTextChanged.call(this,null);return n},get_setErrorsWarningsDelegate:function(){return this.setErrorsWarningsDelegate},set_setErrorsWarningsDelegate:function(n){this.setErrorsWarningsDelegate=n;return n},setErrorsWarningsDelegate:null,get_enableOkButtonDelegate:function(){return this.enableOkButtonDelegate},set_enableOkButtonDelegate:function(n){this.enableOkButtonDelegate=n;return n},enableOkButtonDelegate:null,validate:function(n){var u=new RegExp(this.$2J_4);if(_Object.isNullOrUndefined(this.$2J_4)||u.test(this.get_TextBox().value)){this.setError(null);return!0}else{for(var i="",t=0;t<this.get_TextBox().value.length;t++){var r=EcpUtil.charAt(this.get_TextBox().value,t);if(!u.test(r)){i=r;break}var f=this.get_TextBox().value.charCodeAt(t);if(f<32||f>126){i=r;break}}this.setError([Strings.InvalidCharacter(i)]);return!1}}};function StringEditControlBase(n){this.$$d_onTextChanged=Function.createDelegate(this,this.onTextChanged);this.$$d_$4y_4=Function.createDelegate(this,this.$4y_4);StringEditControlBase.initializeBase(this,[n]);this.inputElement=n}StringEditControlBase.prototype={inputElement:null,get_maxLength:function(){return this.$2Y_4},set_maxLength:function(n){this.$2Y_4=n;this.inputElement.setAttribute("maxLength",n.toString());return n},$2Y_4:0,get_defaultText:function(){return this.$4c_4},set_defaultText:function(n){this.$4c_4=n;return n},$4c_4:null,get_validatingExpression:function(){return this.$2J_4},set_validatingExpression:function(n){this.$2J_4=n;return n},$2J_4:null,get_okButton:function(){return $get("dlgModalError_OK")},initialize:function(){EcpControl.prototype.initialize.call(this);$addHandler(this.inputElement,"drop",this.$$d_$4y_4);$addHandler(this.inputElement,"paste",this.$$d_$4y_4);$addHandler(this.inputElement,"keydown",this.$$d_$4y_4);$addHandler(this.inputElement,"input",this.$$d_onTextChanged);$addHandler(this.inputElement,"blur",this.$$d_onTextChanged)},dispose:function(){$removeHandler(this.inputElement,"blur",this.$$d_onTextChanged);$removeHandler(this.inputElement,"input",this.$$d_onTextChanged);$removeHandler(this.inputElement,"drop",this.$$d_$4y_4);$removeHandler(this.inputElement,"paste",this.$$d_$4y_4);$removeHandler(this.inputElement,"keydown",this.$$d_$4y_4)},$4y_4:function(n){var t=this;window.setTimeout(function(){t.onTextChanged(n)},0)},onTextChanged:function(n){this.get_okButton()&&(this.inputElement.value?this.get_okButton().disabled&&(this.get_okButton().disabled=!1):this.get_okButton().disabled=!0)},addAriaAttribute:function(){var n=$get(this.get_element().id+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLab(this.inputElement,n);AriaUtil.addAriaAttrToControlWithLabelID(this.inputElement,AriaUtil.getFvaReaderSpanId(this.inputElement))}};function TransportRuleEditor(n){this.$$d_$4w_5=Function.createDelegate(this,this.$4w_5);this.$$d_$5w_5=Function.createDelegate(this,this.$5w_5);this.$$d_$5V_5=Function.createDelegate(this,this.$5V_5);this.$$d_$59_5=Function.createDelegate(this,this.$59_5);this.$$d_$5B_5=Function.createDelegate(this,this.$5B_5);TransportRuleEditor.initializeBase(this,[n]);this.$1I_4=!0;this.allowNoActions=!0}TransportRuleEditor.prototype={$1f_5:null,$V_5:null,$2Z_5:null,$1d_5:null,$1N_5:null,$1e_5:null,$s_5:null,$10_5:null,$k_5:null,$1H_5:null,$1b_5:null,$7_5:null,$o_5:null,$40_5:!1,$12_5:null,$1t_5:null,$3l_5:null,$15_5:null,$3P_5:!1,$r_5:null,$z_5:null,$O_5:null,$R_5:null,$N_5:null,$E_5:null,$3Y_5:null,$3E_5:null,$4H_5:null,$1G_5:null,$a_5:null,$h_5:null,$1F_5:null,$45_5:null,$4C_5:null,$4D_5:null,$v_5:null,$2W_5:null,$2l_5:null,$3I_5:null,$3H_5:null,$28_5:null,$3Q_5:null,$2y_5:null,$2V_5:null,$1Z_5:null,get_ActivationDatePicker:function(){return this.$r_5},set_ActivationDatePicker:function(n){this.$r_5=n;return n},get_ActivationDatePropertyName:function(){return this.$s_5},set_ActivationDatePropertyName:function(n){this.$s_5=n;return n},get_ExpiryDatePicker:function(){return this.$z_5},set_ExpiryDatePicker:function(n){this.$z_5=n;return n},get_ExpiryDatePropertyName:function(){return this.$10_5},set_ExpiryDatePropertyName:function(n){this.$10_5=n;return n},get_UseLegecyRegExParameterName:function(){return this.$1f_5},set_UseLegecyRegExParameterName:function(n){this.$1f_5=n;return n},get_DLPPolicyParameterName:function(){return this.$V_5},set_DLPPolicyParameterName:function(n){this.$V_5=n;return n},get_ModePropertyName:function(){return this.$2Z_5},set_ModePropertyName:function(n){this.$2Z_5=n;return n},get_StopProcessingRuleParameterName:function(){return this.$1d_5},set_StopProcessingRuleParameterName:function(n){this.$1d_5=n;return n},get_CommentsPropertyName:function(){return this.$1N_5},set_CommentsPropertyName:function(n){this.$1N_5=n;return n},get_TransportRuleAgentErrorActionName:function(){return this.$1e_5},set_TransportRuleAgentErrorActionName:function(n){this.$1e_5=n;return n},get_ActivationDateCheckbox:function(){return this.$O_5},set_ActivationDateCheckbox:function(n){this.$O_5=n;return n},get_ExpiryDateCheckbox:function(){return this.$R_5},set_ExpiryDateCheckbox:function(n){this.$R_5=n;return n},get_ActivationExpiryContainer:function(){return this.$2l_5},set_ActivationExpiryContainer:function(n){this.$2l_5=n;return n},get_RuleModeContainer:function(){return this.$3I_5},set_RuleModeContainer:function(n){this.$3I_5=n;return n},get_RuleCommentsContainer:function(){return this.$3H_5},set_RuleCommentsContainer:function(n){this.$3H_5=n;return n},get_RulePriorityContainer:function(){return this.$28_5},set_RulePriorityContainer:function(n){this.$28_5=n;return n},get_PriorityParameterName:function(){return this.$1H_5},set_PriorityParameterName:function(n){this.$1H_5=n;return n},get_PriorityTextbox:function(){return this.$1F_5},set_PriorityTextbox:function(n){this.$1F_5=n;return n},get_AuditLevelPropertyName:function(){return this.$k_5},set_AuditLevelPropertyName:function(n){this.$k_5=n;return n},get_AuditLevelCheckbox:function(){return this.$N_5},set_AuditLevelCheckbox:function(n){this.$N_5=n;return n},get_SenderAddressLocationPropertyName:function(){return this.$1b_5},set_SenderAddressLocationPropertyName:function(n){this.$1b_5=n;return n},get_SenderAddressLocationDropdown:function(){return this.$a_5},set_SenderAddressLocationDropdown:function(n){this.$a_5=n;return n},get_CommentsField:function(){return this.$1G_5},set_CommentsField:function(n){this.$1G_5=n;return n},get_BusinessContinuityCheckbox:function(){return this.$v_5},set_BusinessContinuityCheckbox:function(n){this.$v_5=n;return n},get_StopProcessingRulesCheckbox:function(){return this.$7_5},set_StopProcessingRulesCheckbox:function(n){this.$7_5=n;return n},get_PolicyGroupMembershipCheckbox:function(){return this.$o_5},set_PolicyGroupMembershipCheckbox:function(n){this.$o_5=n;return n},get_LegacyRegExCheckbox:function(){return this.$12_5},set_LegacyRegExCheckbox:function(n){this.$12_5=n;return n},get_LegacyRegExPanel:function(){return this.$2W_5},set_LegacyRegExPanel:function(n){this.$2W_5=n;return n},get_AuditLevelDropdown:function(){return this.$E_5},set_AuditLevelDropdown:function(n){this.$E_5=n;return n},get_AuditLevelValues:function(){return this.$3Y_5},set_AuditLevelValues:function(n){this.$3Y_5=n;return n},get_PolicyGroupMembershipValues:function(){return this.$3E_5},set_PolicyGroupMembershipValues:function(n){this.$3E_5=n;return n},get_SenderAddressLocationValues:function(){return this.$4H_5},set_SenderAddressLocationValues:function(n){this.$4H_5=n;return n},get_RuleModeList:function(){return this.$15_5},set_RuleModeList:function(n){this.$15_5=n;return n},get_NotifySenderActionName:function(){return this.$45_5},set_NotifySenderActionName:function(n){this.$45_5=n;return n},get_RejectMessageActionName:function(){return this.$4C_5},set_RejectMessageActionName:function(n){this.$4C_5=n;return n},get_RejectMessageStatusCodeActionName:function(){return this.$4D_5},set_RejectMessageStatusCodeActionName:function(n){this.$4D_5=n;return n},initialize:function(){RuleEditor.prototype.initialize.call(this);if(!this.$J_4){this.$r_5.set_enabled(!1);this.$O_5.checked=!1;this.$z_5.set_enabled(!1);this.$R_5.checked=!1;this.$N_5.checked=!0;this.$15_5.set_value(this.$3l_5);this.$1Z_5.style.display="none";this.$28_5.style.display="none"}},applyPermissionOnParameters:function(n){_Object.isNullOrUndefined(n[this.$s_5])||(this.$O_5.disabled=!0);_Object.isNullOrUndefined(n[this.$10_5])||(this.$R_5.disabled=!0);_Object.isNullOrUndefined(n[this.$1d_5])||(this.$7_5.disabled=!0);if(!_Object.isNullOrUndefined(n[this.$k_5])){this.$N_5.disabled=!0;this.$E_5.set_disabled(!0)}_Object.isNullOrUndefined(n[this.$2Z_5])||this.$15_5.set_enabled(!1);if(!_Object.isNullOrUndefined(n[this.$1f_5])&&this.$J_4){this.$12_5.disabled=!0;Sys.UI.DomElement.addCssClass(this.$12_5,CssClasses.hiddenCSS)}_Object.isNullOrUndefined(n[this.$1e_5])||(this.$v_5.disabled=!0);_Object.isNullOrUndefined(n[this.$1b_5])||this.$a_5.set_disabled(!0);_Object.isNullOrUndefined(n[this.$1N_5])||(this.$1G_5.disabled=!0);if(!_Object.isNullOrUndefined(n[this.$V_5])){this.$o_5.disabled=!0;this.$h_5.set_disabled(!0)}_Object.isNullOrUndefined(n[this.$1H_5])||(this.$1F_5.disabled=!0)},updateActionItems:function(n){RuleEditor.prototype.updateActionItems.call(this,n);for(var i=null,r=null,u=null,f=0;f<this.$D_4.length;f++){var t=this.$D_4[f];t.Name===this.$45_5?i=t:t.Name===this.$4C_5?r=t:t.Name===this.$4D_5&&(u=t)}this.$3d_5(i,n,[r,u]);this.$3d_5(r,n,[i,u]);this.$3d_5(u,n,[r,i])},$3d_5:function(n,t,i){var u=RuleEditor.findEditorByPhrase(this.actionEditors,n);if(u&&u!==t)for(var r=0;r<i.length;r++){var f=t.$0_3.findByValue(i[r]);f.set_enabled(!1)}},$59_5:function(n){this.$r_5.set_enabled(this.$O_5.checked)},$5w_5:function(n){this.$h_5.set_disabled(!this.$o_5.checked)},$5B_5:function(n){this.$E_5.set_disabled(!this.$N_5.checked)},$5V_5:function(n){this.$z_5.set_enabled(this.$R_5.checked)},initParametersPanel:function(){RuleEditor.prototype.initParametersPanel.call(this);this.$5M_5();this.$5P_5();this.$5G_5();this.$5O_5();this.$5F_5();this.$5R_5();this.$5H_5();this.$5I_5();this.$5Q_5();this.$5J_5();this.$5N_5()},$q_5:function(n){n.className="RuleEditorOption"},$5M_5:function(){var n=document.createElement("DIV");n.innerHTML="<br />"+Strings.get_AdditionalPropertiesLabel()+"<br />";this.$1c_4.appendChild(n)},$5I_5:function(){var n="legacyRegExChk";this.$2V_5=document.createElement("DIV");this.$q_5(this.$2V_5);Sys.UI.DomElement.addCssClass(this.$2V_5,CssClasses.hiddenCSS);this.$2V_5.innerHTML=String.format("<input id='{0}' class='RuleStopProcessingCheckBox' name='{0}' type='checkbox' /><label id='{0}_label' class='RuleStopProcessingLabel' for='{0}'>{1}</label>",n,Strings.get_LegacyRegExEnabledRuleLabel());this.$Y_4.appendChild(this.$2V_5);this.$12_5=$get(n)},$5P_5:function(){var n=document.createElement("TABLE");n.className=CssClasses.ruleParametersTable;this.$28_5.appendChild(n);var t=document.createElement("TR");var i=document.createElement("TD");t.appendChild(i);i.appendChild(this.$1F_5);n.appendChild(t);this.$q_5(this.$28_5);this.$1c_4.appendChild(this.$28_5)},$5G_5:function(){var u="auditSeverityLevel";var n=document.createElement("DIV");n.id="auditSeverityLevelPanel";var t=document.createElement("TABLE");t.className=CssClasses.ruleParametersTable;n.appendChild(t);this.$1c_4.appendChild(n);this.$q_5(n);var f=document.createElement("TR");var e=document.createElement("TD");f.appendChild(e);e.innerHTML=String.format("<input id='{0}' class='RuleStopProcessingCheckBox' name='{0}' type='checkbox' /><label id='{0}_label' class='RuleStopProcessingLabel' for='{0}'>{1}</label>",u,Strings.get_AuditSeverityLevelLabel());t.appendChild(f);for(var o=[],s=this.$3Y_5,c=s.length,i=0;i<c;++i){var h=s[i];Array.add(o,ComboBoxItem.createInstance(h.DisplayText,h.Value))}this.$N_5=$get(u);this.$E_5=ComboBox.createInstanceWithItems(o,"",null);this.$J_4||this.$E_5.set_selectedItem(this.$E_5.findByValue(""));var l=document.createElement("TR");var r=document.createElement("TD");l.appendChild(r);t.appendChild(r);this.$E_5.addToDOMElement(r);this.$E_5.set_autoSize(!0);$addHandler(this.$N_5,EventNames.click,this.$$d_$5B_5)},$5F_5:function(){this.$Y_4.appendChild(this.$2l_5);this.$q_5(this.$2l_5);$addHandler(this.$O_5,EventNames.click,this.$$d_$59_5);$addHandler(this.$R_5,EventNames.click,this.$$d_$5V_5)},$5J_5:function(){var u="policyGroupMembership";this.$1Z_5=document.createElement("DIV");this.$1Z_5.id="policyGroupMembershipPanel";var n=document.createElement("TABLE");n.className=CssClasses.ruleParametersTable;n.style.borderCollapse="collapse";this.$1Z_5.appendChild(n);this.$Y_4.appendChild(this.$1Z_5);this.$q_5(this.$1Z_5);var f=document.createElement("TR");var e=document.createElement("TD");f.appendChild(e);e.innerHTML=String.format("<input id='{0}' class='RuleStopProcessingCheckBox' name='{0}' type='checkbox' /><label id='{0}_label' class='RuleStopProcessingLabel' for='{0}'>{1}</label>",u,Strings.get_PolicyGroupMembership());n.appendChild(f);var t=[];if(!_Object.isNullOrUndefined(this.$3E_5))for(var o=this.$3E_5,h=o.length,r=0;r<h;++r){var s=o[r];Array.add(t,ComboBoxItem.createInstance(s.DisplayText,s.Value))}this.$o_5=$get(u);this.$h_5=ComboBox.createInstanceWithItems(t,"",null);var c=document.createElement("TR");var i=document.createElement("TD");i.style.padding="5";c.appendChild(i);n.appendChild(i);this.$h_5.addToDOMElement(i);this.$h_5.set_autoSize(!0);t.length?this.$h_5.set_value(t[0].get_value()):this.$1Z_5.style.display="none";$addHandler(this.$o_5,EventNames.click,this.$$d_$5w_5)},$5R_5:function(){var n="stopProcessingChk";this.$3Q_5=document.createElement("DIV");this.$q_5(this.$3Q_5);this.$3Q_5.innerHTML=String.format("<input id='{0}' class='RuleStopProcessingCheckBox' name='{0}' type='checkbox' /><label id='{0}_label' class='RuleStopProcessingLabel' for='{0}'>{1}</label>",n,Strings.get_StopProcessingRuleLabel());this.$Y_4.appendChild(this.$3Q_5);this.$7_5=$get(n);$addHandler(this.$7_5,EventNames.click,this.$$d_$4w_5);this.$7_5.checked=this.$35_5()},$5H_5:function(){var n="businessContinuity";this.$2y_5=document.createElement("DIV");this.$q_5(this.$2y_5);this.$2y_5.innerHTML=String.format("<input id='{0}' class='RuleStopProcessingCheckBox' name='{0}' type='checkbox' /><label id='{0}_label' class='RuleStopProcessingLabel' for='{0}'>{1}</label>",n,Strings.get_TransportRuleBusinessContinuity());this.$Y_4.appendChild(this.$2y_5);this.$v_5=$get(n)},$5N_5:function(){this.$q_5(this.$3H_5);this.$Y_4.appendChild(this.$3H_5)},$5O_5:function(){this.$q_5(this.$3I_5);this.$1c_4.appendChild(this.$3I_5)},$5Q_5:function(){var n=document.createElement("DIV");n.id="senderAddressLocation";this.$q_5(n);var t=document.createElement("TABLE");t.className=CssClasses.ruleParametersTable;this.$Y_4.appendChild(n);n.appendChild(t);var r=document.createElement("TR");var u=document.createElement("TD");r.appendChild(u);u.innerHTML=Strings.get_CustomizeSenderLabel();t.appendChild(r);for(var f=[],e=this.$4H_5,c=e.length,i=0;i<c;++i){var o=e[i];Array.add(f,ComboBoxItem.createInstance(o.DisplayText,o.Value))}this.$a_5=ComboBox.createInstanceWithItems(f,"",null);this.$J_4||this.$a_5.set_selectedItem(this.$a_5.get_items()[0]);var s=document.createElement("TR");var h=document.createElement("TD");s.appendChild(h);t.appendChild(s);this.$a_5.addToDOMElement(h);this.$a_5.set_autoSize(!0)},switchMode:function(){_Object.isNullOrUndefined(this.$2W_5)||(this.isSimpleMode?Sys.UI.DomElement.addCssClass(this.$2W_5,CssClasses.hiddenCSS):!this.isSimpleMode&&this.$40_5&&Sys.UI.DomElement.removeCssClass(this.$2W_5,CssClasses.hiddenCSS));RuleEditor.prototype.switchMode.call(this)},get_value:function(){var n=RuleEditor.prototype.get_value.call(this);this.$11_4&&(n[this.$1H_5]=null);this.$7_5.disabled||this.originalValue[this.$1d_5]!==this.$7_5.checked&&(n[this.$1d_5]=this.$7_5.checked);this.$12_5.disabled||this.$40_5&&this.originalValue[this.$1f_5]!==this.$12_5.checked&&(n[this.$1f_5]=this.$12_5.checked);if(!this.$O_5.disabled){var i=this.$3R_5(this.originalValue[this.$s_5]);this.$r_5.get_selectedValue().toUTCString()!==i.toUTCString()&&this.$O_5.checked?n[this.$s_5]=this.$r_5.get_selectedValue():_Object.isNull(this.originalValue[this.$s_5])||this.$O_5.checked||(n[this.$s_5]=null)}if(!this.$R_5.disabled){var t=this.$3R_5(this.originalValue[this.$10_5]);t&&this.$z_5.get_selectedValue().toUTCString()!==t.toUTCString()&&this.$R_5.checked?n[this.$10_5]=this.$z_5.get_selectedValue():_Object.isNull(this.originalValue[this.$10_5])||this.$R_5.checked||(n[this.$10_5]=null)}this.$N_5.disabled||(this.originalValue[this.$k_5]!==this.$E_5.get_value()&&this.$N_5.checked?n[this.$k_5]=this.$E_5.get_value():this.$N_5.checked||this.originalValue[this.$k_5]==="DoNotAudit"||(n[this.$k_5]="DoNotAudit"));this.$15_5.get_enabled()&&this.$15_5.get_value()!==this.originalValue[this.$2Z_5]&&this.$15_5.get_enabled()&&(n[this.$2Z_5]=this.$15_5.get_value());this.$1G_5.disabled||this.$1G_5.value===this.originalValue[this.$1N_5]||this.$1G_5.disabled||(n[this.$1N_5]=this.$1G_5.value);this.$v_5.disabled||(n[this.$1e_5]=this.$v_5.checked?"Defer":"Ignore");this.$a_5.get_disabled()||this.originalValue[this.$1b_5]!==this.$a_5.get_value()&&(n[this.$1b_5]=this.$a_5.get_value());this.$h_5.get_enabled()&&this.$J_4?this.$o_5.checked?this.originalValue[this.$V_5]!==this.$h_5.get_value()&&(n[this.$V_5]=this.$h_5.get_value()):_Object.isNullOrUndefined(this.originalValue[this.$V_5])||(n[this.$V_5]=null):_Object.isNullOrUndefined(this.$1t_5)||this.originalValue[this.$V_5]===this.$1t_5||(n[this.$V_5]=this.$1t_5);!this.$1F_5.disabled&&this.$J_4&&this.originalValue[this.$1H_5]!==this.$1F_5.value&&(n[this.$1H_5]=this.$1F_5.value);return n},set_value:function(n){RuleEditor.prototype.set_value.call(this,n);this.$1t_5=_Object.isNullOrUndefined(n[this.$V_5])?null:n[this.$V_5].toString();this.$7_5.checked=_Object.isNullOrUndefined(n[this.$1d_5])?!1:n[this.$1d_5];if(!_Object.isNullOrUndefined(n[this.$1f_5])&&n[this.$1f_5]){this.$12_5.checked=!0;this.$40_5=!0}if(_Object.isNullOrUndefined(n[this.$s_5])){this.$r_5.set_enabled(!1);this.$O_5.checked=!1}else{this.$r_5.set_enabled(!this.$O_5.disabled);this.$r_5.set_selectedValue(this.$3R_5(n[this.$s_5]));this.$O_5.checked=!0}if(_Object.isNullOrUndefined(n[this.$10_5])){this.$z_5.set_enabled(!1);this.$R_5.checked=!1}else{this.$z_5.set_enabled(!this.$R_5.disabled);this.$z_5.set_selectedValue(this.$3R_5(n[this.$10_5]));this.$R_5.checked=!0}if(n[this.$k_5]==="DoNotAudit"){this.$E_5.set_disabled(!0);this.$N_5.checked=!1;this.$E_5.set_selectedItem(this.$E_5.findByValue(""))}else{this.$E_5.set_disabled(this.$N_5.disabled);_Object.isNullOrUndefined(n[this.$k_5])?this.$E_5.set_selectedItem(this.$E_5.findByValue("")):this.$E_5.set_selectedItem(this.$E_5.findByValue(n[this.$k_5]));this.$N_5.checked=!0}var t=_Object.isNullOrUndefined(n.Mode)?"":n.Mode.toString();EcpUtil.isNullOrBlank(t)||this.$15_5.set_value(t);_Object.isNullOrUndefined(n[this.$1N_5])||(this.$1G_5.value=n[this.$1N_5].toString());this.$v_5.checked=_Object.isNullOrUndefined(n[this.$1e_5])||n[this.$1e_5].toString().toLowerCase()!=="defer"?!1:!0;_Object.isNullOrUndefined(n[this.$1b_5])||this.$a_5.set_value(n[this.$1b_5].toString());_Object.isNullOrUndefined(n[this.$1H_5])||(this.$1F_5.value=n[this.$1H_5].toString());if(this.$J_4)if(_Object.isNullOrUndefined(n[this.$V_5])){this.$o_5.checked=!1;this.$h_5.set_disabled(!0)}else{this.$o_5.checked=!0;this.$h_5.set_value(n[this.$V_5].toString())}if(this.isSimpleMode){var i=this.$7_5.checked||this.$v_5.checked||this.$O_5.checked||this.$R_5.checked;if(i){this.isSimpleMode=!1;this.switchMode()}}return n},$3R_5:function(n){if(_Object.isNullOrUndefined(n))return new Date(0);var t=n.substr(1,n.length-2);return Sys.Serialization.JavaScriptSerializer.deserialize('"'+"\\/"+t+"\\/"+'"')},dispose:function(){$removeHandler(this.$7_5,EventNames.click,this.$$d_$4w_5);$removeHandler(this.$O_5,EventNames.click,this.$$d_$59_5);$removeHandler(this.$R_5,EventNames.click,this.$$d_$5V_5);$removeHandler(this.$N_5,EventNames.click,this.$$d_$5B_5);$removeHandler(this.$o_5,EventNames.click,this.$$d_$5w_5);RuleEditor.prototype.dispose.call(this)},$35_5:function(){for(var t=!1,n=0;n<this.actionEditors.length;++n)if(this.actionEditors[n].$3_3&&this.actionEditors[n].$3_3.StopProcessingRulesByDefault){t=!0;break}return t},$4w_5:function(n){this.$3P_5=!0},onActionEditorsChanged:function(){if(!this.$J_4&&!this.$3P_5){var n=this.$35_5();this.$7_5&&this.$7_5.checked!==n&&(this.$7_5.checked=n)}},validate:function(n){var t=this.get_parent();t.set_HideClientValidationError(!1);this.$E_5.setErrorState(!1);var i=this.$N_5.checked&&!EcpUtil.isNullOrBlank(this.$E_5.get_selectedItem().get_value());if(this.actionEditors[0].get_hasSelection()){this.$E_5.setErrorState(!1);t.set_HideClientValidationError(!1);return RuleEditor.prototype.validate.call(this,n)}else{if(!this.$7_5.checked&&!i){t.set_HideClientValidationError(!0);this.$E_5.setErrorState(!0);MessageBox.showMessage(Strings.get_NoActionRuleAuditSeverity(),MessageBoxType.error);return!1}return RuleEditor.prototype.validate.call(this,n)}},get_DLPPolicy:function(){return this.$1t_5},set_DLPPolicy:function(n){this.$1t_5=n;return n},get_DLPPolicyMode:function(){return this.$3l_5},set_DLPPolicyMode:function(n){this.$3l_5=n;return n}};function ADAttributePicker(n){ADAttributePicker.initializeBase(this,[n])}ADAttributePicker.prototype={get_ECPCollectionEditor:function(){return this.$1u_4},set_ECPCollectionEditor:function(n){this.$1u_4=n;return n},$1u_4:null,get_value:function(){return this.$1u_4.get_fullValue()},set_value:function(n){this.$1u_4.set_value(n);return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null,addAriaAttribute:function(){var n=$get(this.get_element().id+AriaUtil.associatedLabelSuffix);AriaUtil.addAriaAttrToControlWithLab(this.$1u_4.get_element(),n);AriaUtil.addAriaAttrToControlWithLabelID(this.$1u_4.get_element(),AriaUtil.getFvaReaderSpanId(this.get_element()))}};function CallerIdItem(n,t,i){this.GALContactLegacyDN=_String.empty;this.PersonalContactStoreId=_String.empty;this.PhoneNumber=_String.empty;this.CallerIdType=n;this.PersonaEmailAddress=t?t:_String.empty;this.DisplayName=i?i:_String.empty}CallerIdItem.prototype={CallerIdType:0,GALContactLegacyDN:null,PersonalContactStoreId:null,PhoneNumber:null,PersonaEmailAddress:null,DisplayName:null};function CallerIdsPicker(n){this.$$d_$5r_4=Function.createDelegate(this,this.$5r_4);this.$$d_$5l_4=Function.createDelegate(this,this.$5l_4);this.$$d_$5m_4=Function.createDelegate(this,this.$5m_4);this.$$d_$5k_4=Function.createDelegate(this,this.$5k_4);CallerIdsPicker.initializeBase(this,[n])}CallerIdsPicker.prototype={$i_4:null,initialize:function(){EcpControl.prototype.initialize.call(this);this.$1E_4.className=CssClasses.rulePhraseParameterLink;$addHandler(this.$1A_4,"click",this.$$d_$5k_4);$addHandler(this.$1z_4,"click",this.$$d_$5m_4);$addHandler(this.$19_4,"click",this.$$d_$5l_4);$addHandler(this.$1E_4,"click",this.$$d_$5r_4);this.$1E_4.setAttribute("href",GlobalVariables.emptyHref);this.$3M_4(!1)},get_PhoneNumbersInEditor:function(){return this.$13_4},set_PhoneNumbersInEditor:function(n){this.$13_4=n;return n},$13_4:null,get_IsInContactsFolderChbx:function(){return this.$1z_4},set_IsInContactsFolderChbx:function(n){this.$1z_4=n;return n},$1z_4:null,get_IsFromNumbersChbx:function(){return this.$1A_4},set_IsFromNumbersChbx:function(n){this.$1A_4=n;return n},$1A_4:null,get_IsAmongSelectedContactsChbx:function(){return this.$19_4},set_IsAmongSelectedContactsChbx:function(n){this.$19_4=n;return n},$19_4:null,get_OpenPeoplePickerLink:function(){return this.$1E_4},set_OpenPeoplePickerLink:function(n){this.$1E_4=n;return n},$1E_4:null,get_PeoplePickerLinkText:function(){return this.$48_4},set_PeoplePickerLinkText:function(n){this.$48_4=n;return n},$48_4:null,get_value:function(){var t=[];if(this.$1A_4.checked)for(var s=this.$13_4.get_value(),u=s,h=u.length,i=0;i<h;++i){var c=u[i];var n=new CallerIdItem;n.CallerIdType=1;n.PhoneNumber=c;n.GALContactLegacyDN=null;n.PersonalContactStoreId=null;Array.add(t,n)}if(this.$1z_4.checked){var f=new CallerIdItem;f.CallerIdType=4;Array.add(t,f)}if(this.$19_4.checked&&this.$i_4)for(var e=this.$i_4,l=e.length,r=0;r<l;++r){var a=e[r];var o=a;var v=new CallerIdItem(5,o.SMTPAddress,o.DisplayName);Array.add(t,v)}return t},set_value:function(n){if(n){var e=n;var u=!1;var i=[];this.$i_4=[];for(var f=e,o=f.length,r=0;r<o;++r){var t=f[r];switch(t.CallerIdType){case 1:Array.add(i,t.PhoneNumber);break;case 5:var s=new PeopleIdentity(t.DisplayName,_String.empty,t.PersonaEmailAddress,0,_String.empty,0);Array.add(this.$i_4,s);this.$19_4.checked=!0;break;case 4:this.$1z_4.checked=!0;break;default:break}}u=i.length>0;if(u){this.$1A_4.checked=!0;this.$13_4.set_value(i);this.$3M_4(!0)}this.$19_4.checked&&this.$4e_4();this.$2D_4()}return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;this.$13_4.set_enableOkButtonDelegate(this.$5_4);this.$2D_4();return n},$5_4:null,$5k_4:function(n){this.$1A_4.checked?this.$3M_4(!0):this.$3M_4(!1);this.$2D_4()},$5m_4:function(n){this.$2D_4()},$5l_4:function(n){this.$2D_4()},$3M_4:function(n){this.$13_4.set_enabled(n)},$2D_4:function(){if(this.$1z_4.checked||this.$1A_4.checked||this.$19_4.checked){this.$5_4(!0);this.$1A_4.checked&&(this.$13_4.get_enabled()&&this.$13_4.$C_4.get_TotalItemCount()>0||this.$5_4(!1));this.$19_4.checked&&this.$i_4&&this.$i_4.length<1&&this.$5_4(!1)}else this.$5_4(!1)},$5r_4:function(n){this.$i_4=OwaPickerUtil.invokeOwaPickerCommon(9,this.$i_4,!1);this.$4e_4();this.$2D_4()},$4e_4:function(){var n=new Sys.StringBuilder;if(this.$i_4&&this.$i_4.length>0)for(var i=this.$i_4,u=i.length,t=0;t<u;++t){var r=i[t];if(n.isEmpty())n.append(r.DisplayName);else{n.append(" ");n.append(Strings.get_Or());n.append(" ");n.append(r.DisplayName)}}if(n.isEmpty())EcpUtil.setInnerText(this.$1E_4,this.$48_4);else{EcpUtil.setInnerText(this.$1E_4,n.toString());this.$1E_4.title=n.toString()}}};function TimePeriodPicker(n){this.$$d_$5u_4=Function.createDelegate(this,this.$5u_4);TimePeriodPicker.initializeBase(this,[n])}TimePeriodPicker.$1M=function(n,t){return(n&t)===t};TimePeriodPicker.prototype={$2v_4:!1,initialize:function(){EcpControl.prototype.initialize.call(this);$addHandler(this.$2L_4,"click",this.$$d_$5u_4);$addHandler(this.$25_4,"click",this.$$d_$5u_4);$addHandler(this.$1r_4,"click",this.$$d_$5u_4);this.$2z_4()},setEnabled:function(n){ContainerControl.prototype.setEnabled.call(this,n);this.$2z_4()},get_$3k_4:function(){return this.$2v_4},set_$3k_4:function(n){if(this.$2v_4!==n){this.$2v_4=n;this.$2v_4?this.$4g_4():this.$2z_4()}return n},get_MondayChbx:function(){return this.$24_4},set_MondayChbx:function(n){this.$24_4=n;return n},$24_4:null,get_TuesdayChbx:function(){return this.$2H_4},set_TuesdayChbx:function(n){this.$2H_4=n;return n},$2H_4:null,get_WednesdayChbx:function(){return this.$2K_4},set_WednesdayChbx:function(n){this.$2K_4=n;return n},$2K_4:null,get_ThursdayChbx:function(){return this.$2G_4},set_ThursdayChbx:function(n){this.$2G_4=n;return n},$2G_4:null,get_FridayChbx:function(){return this.$1y_4},set_FridayChbx:function(n){this.$1y_4=n;return n},$1y_4:null,get_SaturdayChbx:function(){return this.$29_4},set_SaturdayChbx:function(n){this.$29_4=n;return n},$29_4:null,get_SundayChbx:function(){return this.$2F_4},set_SundayChbx:function(n){this.$2F_4=n;return n},$2F_4:null,get_WorkingHoursRB:function(){return this.$2L_4},set_WorkingHoursRB:function(n){this.$2L_4=n;return n},$2L_4:null,get_OutsideWorkingHoursRB:function(){return this.$25_4},set_OutsideWorkingHoursRB:function(n){this.$25_4=n;return n},$25_4:null,get_CustomTimePeriodRB:function(){return this.$1r_4},set_CustomTimePeriodRB:function(n){this.$1r_4=n;return n},$1r_4:null,get_InitialHourDDL:function(){return this.$1T_4},set_InitialHourDDL:function(n){this.$1T_4=n;return n},$1T_4:null,get_FinalHourDDL:function(){return this.$1Q_4},set_FinalHourDDL:function(n){this.$1Q_4=n;return n},$1Q_4:null,get_value:function(){var n={};if(this.$2L_4.checked){n.TimeOfDayType=1;n.CustomPeriodDays=0}else if(this.$25_4.checked){n.TimeOfDayType=2;n.CustomPeriodDays=0}else if(this.$1r_4.checked){n.TimeOfDayType=3;n.CustomPeriodStartTime=this.$1T_4.options[this.$1T_4.selectedIndex].value;n.CustomPeriodEndTime=this.$1Q_4.options[this.$1Q_4.selectedIndex].value;var t=0;this.$24_4.checked&&(t|=2);this.$2H_4.checked&&(t|=4);this.$2K_4.checked&&(t|=8);this.$2G_4.checked&&(t|=16);this.$1y_4.checked&&(t|=32);this.$29_4.checked&&(t|=64);this.$2F_4.checked&&(t|=1);n.CustomPeriodDays=t}return n},set_value:function(n){var t=n;if(n)switch(t.TimeOfDayType){case 1:this.$2L_4.checked=!0;this.set_$3k_4(!1);break;case 2:this.$25_4.checked=!0;this.set_$3k_4(!1);break;case 3:this.$1r_4.checked=!0;this.set_$3k_4(!0);this.$1T_4.value=t.CustomPeriodStartTime;this.$1Q_4.value=t.CustomPeriodEndTime;TimePeriodPicker.$1M(t.CustomPeriodDays,2)&&(this.$24_4.checked=!0);TimePeriodPicker.$1M(t.CustomPeriodDays,4)&&(this.$2H_4.checked=!0);TimePeriodPicker.$1M(t.CustomPeriodDays,8)&&(this.$2K_4.checked=!0);TimePeriodPicker.$1M(t.CustomPeriodDays,16)&&(this.$2G_4.checked=!0);TimePeriodPicker.$1M(t.CustomPeriodDays,32)&&(this.$1y_4.checked=!0);TimePeriodPicker.$1M(t.CustomPeriodDays,64)&&(this.$29_4.checked=!0);TimePeriodPicker.$1M(t.CustomPeriodDays,1)&&(this.$2F_4.checked=!0);break;default:break}return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null,$5u_4:function(n){var t=n.target;t.value===this.$2L_4.value||t.value===this.$25_4.value?this.$2z_4():t.value===this.$1r_4.value&&this.$4g_4()},$2z_4:function(){this.$24_4.disabled=!0;this.$2F_4.disabled=!0;this.$2G_4.disabled=!0;this.$2H_4.disabled=!0;this.$2K_4.disabled=!0;this.$29_4.disabled=!0;this.$1y_4.disabled=!0;this.$1T_4.disabled=!0;this.$1Q_4.disabled=!0},$4g_4:function(){this.$24_4.disabled=!1;this.$2F_4.disabled=!1;this.$2G_4.disabled=!1;this.$2H_4.disabled=!1;this.$2K_4.disabled=!1;this.$29_4.disabled=!1;this.$1y_4.disabled=!1;this.$1T_4.disabled=!1;this.$1Q_4.disabled=!1}};function UMCallAnsweringRuleEditor(n){this.$$d_onRecordGreetingLinkClicked=Function.createDelegate(this,this.onRecordGreetingLinkClicked);UMCallAnsweringRuleEditor.initializeBase(this,[n]);this.allowNoActions=!0}UMCallAnsweringRuleEditor.prototype={$1S_5:null,$3B_5:null,$4B_5:null,$2d_5:null,get_value:function(){var n=RuleEditor.prototype.get_value.call(this);this.$J_4&&this.originalValue.CallersCanInterruptGreeting!==this.$3B_5.checked&&(n.CallersCanInterruptGreeting=this.$3B_5.checked);return n},set_value:function(n){this.$J_4&&(this.$3B_5.checked=_Object.isNullOrUndefined(n.CallersCanInterruptGreeting)?!1:n.CallersCanInterruptGreeting);RuleEditor.prototype.set_value.call(this,n);this.actionEditors[0].set_SimpleMode(!0);return n},initialize:function(){this.$2P_4=[this.$D_4[0].Name];RuleEditor.prototype.initialize.call(this)},initializeApplyToAllMessageCondition:function(){var n=RuleEditor.prototype.initializeApplyToAllMessageCondition.call(this);n.DisplayText=n.NamingFormat=Strings.get_ApplyToAllCalls();return n},initParametersPanel:function(){this.$2t_4=Strings.get_UMCallAnsweringRulesEditorRuleConditionLabelText();RuleEditor.prototype.initParametersPanel.call(this);if(this.$J_4){var u="letCallersInterruptChk";var t=document.createElement("TR");this.ruleNameLabelRow.parentNode.insertBefore(t,this.ruleNameLabelRow);this.$1S_5=document.createElement("TD");this.$1S_5.className=CssClasses.phrasesLabel;this.$1S_5.colSpan=2;var n=document.createElement("TABLE");n.id="greetingsAndPromptsTable";var f=document.createElement("TR");var e=document.createElement("TD");var o=document.createElement("DIV");o.innerHTML=Strings.get_GreetingsAndPromptsTitleText();e.appendChild(o);f.appendChild(e);n.appendChild(f);var s=document.createElement("TR");var h=document.createElement("TD");var c=document.createElement("DIV");c.innerHTML=Strings.get_GreetingsAndPromptsInstructionsText();h.appendChild(c);s.appendChild(h);n.appendChild(s);var l="recordGreetingLink";var a=document.createElement("TR");var v=document.createElement("TD");var i=document.createElement("DIV");var w=Strings.get_RecordGreetingLinkText();var b=String.format("<a id='{0}' href='javascript:void(0);'>{1}</a>",l,RtlUtil.convertToBidiString(w));i.innerHTML=b;v.appendChild(i);a.appendChild(v);n.appendChild(a);var y=document.createElement("TR");var p=document.createElement("TD");var r=document.createElement("DIV");var k=Strings.get_LetCallersInterruptGreetingsText();r.innerHTML=String.format("<input id='{0}' name='{0}' type='checkbox' /><label id='{0}_label' for='{0}'>{1}</label>",u,k);p.appendChild(r);y.appendChild(p);n.appendChild(y);this.$1S_5.appendChild(n);t.id="greetingsAndPromptsRuleRow";t.insertCell(-1);t.appendChild(this.$1S_5);this.$4B_5=$get(l,i);this.$2d_5=this.$$d_onRecordGreetingLinkClicked;$addHandler(this.$4B_5,EventNames.click,this.$2d_5);this.$3B_5=$get(u,r);_DomElement.toggelCssClass(this.$1S_5,this.isSimpleMode,CssClasses.hiddenCSS)}},switchMode:function(){this.$J_4&&_DomElement.toggelCssClass(this.$1S_5,this.isSimpleMode,CssClasses.hiddenCSS);RuleEditor.prototype.switchMode.call(this);var n=$get("addActionButton",this.$1Y_4);n&&_DomElement.toggelCssClass(n,!0,CssClasses.hiddenCSS)},onRecordGreetingLinkClicked:function(n){var t=this.originalValue.Identity.RawIdentity;var i={};i.CallAnsweringRuleIdInitialValue=t;i.IsVisibleInitialValue=!0;var r="RecordGreeting.aspx?PlayOnPhoneVisible=true&CallAnsweringRuleId="+t;PopupWindowManager.OpenWindow(r,"_blank",BuildCenteredWindowFeatureString(500,700,GlobalVariables.FeaturesForPopups));n.preventDefault();n.stopPropagation()},dispose:function(){if(this.$2d_5){$removeHandler(this.$4B_5,EventNames.click,this.$2d_5);this.$2d_5=null}RuleEditor.prototype.dispose.call(this)}};function KeyMapping(n,t,i,r,u,f,e,o,s,h){this.Context=n;this.FindMeFirstNumber=t;this.FindMeFirstNumberDuration=i;this.FindMeSecondNumber=r;this.FindMeSecondNumberDuration=u;this.Key=f;this.KeyForDisplay=f<=9?f.toString():"#";this.KeyMappingType=e;this.TransferToGALContactLegacyDN=o;this.TransferToGALContactDisplayName=s;this.TransferToNumber=h;this.KeyMappingTypeDisplay=KeyMapping.getKeyMappingTypeDisplay(e,h,s)}KeyMapping.getKeyMappingTypeDisplay=function(n,t,i){switch(n){case"TransferToNumber":return String.format(Strings.get_TransferToNumberText(),t);case"TransferToGALContact":return String.format(Strings.get_TransferToGalContactText(),i);case"TransferToGALContactVoiceMail":return String.format(Strings.get_TransferToGalContactVoicemailText(),i);case"VoiceMail":return Strings.get_VoiceMailText();case"FindMe":return Strings.get_FindMeText();default:return n}};KeyMapping.prototype={KeyForDisplay:null,Context:null,FindMeFirstNumber:null,FindMeFirstNumberDuration:0,FindMeSecondNumber:null,FindMeSecondNumberDuration:0,Key:0,KeyMappingType:null,KeyMappingTypeDisplay:null,TransferToGALContactLegacyDN:null,TransferToNumber:null,TransferToGALContactDisplayName:null};function KeyMappingsPicker(n){this.$$d_onCallTransferDialogOK=Function.createDelegate(this,this.onCallTransferDialogOK);this.$$d_onFindMeDialogOK=Function.createDelegate(this,this.onFindMeDialogOK);KeyMappingsPicker.initializeBase(this,[n])}KeyMappingsPicker.prototype={get_value:function(){return EcpCollectionEditor.prototype.get_value.call(this)},set_value:function(n){if(n){for(var r=n,u=r,f=u.length,i=0;i<f;++i){var t=u[i];t.KeyForDisplay=t.Key<=9?t.Key.toString():"#";t.KeyMappingTypeDisplay=KeyMapping.getKeyMappingTypeDisplay(t.KeyMappingType,t.TransferToNumber,t.TransferToGALContactDisplayName)}EcpCollectionEditor.prototype.set_value.call(this,r)}else EcpCollectionEditor.prototype.set_value.call(this,[new KeyMapping(null,null,0,null,0,10,"VoiceMail",null,null,null)]);return n},addFindMeOptionCommand:function(){var t=this.generatePickerUrl("FindMe.aspx",!1);var i=this.get_DialogHeight()!==this.get_AddCommandDialogHeight()?this.get_AddCommandDialogHeight():this.get_DialogHeight();var r=this.get_DialogWidth()!==this.get_AddCommandDialogWidth()?this.get_AddCommandDialogWidth():this.get_DialogWidth();var n={};n.FindMeFirstNumberDuration=20;n.FindMeSecondNumberDuration=20;n.KeyMappingType="FindMe";ModalPopupLauncherHelper.openModalPopup(t,this.get_DialogHeight(),this.get_DialogWidth(),n,this.get_DataContext(),this.$$d_onFindMeDialogOK)},addCallTransferOptionCommand:function(){var t=this.generatePickerUrl("CallTransfer.aspx",!1);var i=this.get_DialogHeight()!==this.get_AddCommandDialogHeight()?this.get_AddCommandDialogHeight():this.get_DialogHeight();var r=this.get_DialogWidth()!==this.get_AddCommandDialogWidth()?this.get_AddCommandDialogWidth():this.get_DialogWidth();var n={};n.KeyMappingType="VoiceMail";ModalPopupLauncherHelper.openModalPopup(t,this.get_DialogHeight(),this.get_DialogWidth(),n,this.get_DataContext(),this.$$d_onCallTransferDialogOK)},get_setErrorsWarningsDelegate:function(){return this.$9_6},set_setErrorsWarningsDelegate:function(n){this.$9_6=n;return n},$9_6:null,get_enableOkButtonDelegate:function(){return this.$5_6},set_enableOkButtonDelegate:function(n){this.$5_6=n;return n},$5_6:null,onCallTransferDialogOK:function(n){var f=null;var e=null;try{f=EcpUtil.deserializeArray(n)}catch(y){}_Object.isNullOrUndefined(f)||(n=f);if(!_Object.isNullOrUndefined(n)&&n.length>0){var t=n[0];var r=t.KeyMappingType;var o=t.ContactVoiceMailSelected;var l=t.PhoneNumberSelected;var a=t.ContactSelected;var u=null;var s=null;var i=null;var h=null;var c=null;if(l){r="TransferToNumber";u=DataBinder.getPropertyValue(t,"TransferToNumber")}else if(o||a){s=DataBinder.getPropertyValue(t,"SelectedContact");i=s[0];h=i.galContactGuid;c=i.DisplayName;r=o?"TransferToGALContactVoiceMail":"TransferToGALContact"}var v=KeyMapping.getKeyMappingTypeDisplay(r,u?u.toString():null,i?i.DisplayName.toString():null);e={Context:t.Context,TransferToGALContactLegacyDN:h,TransferToGALContactDisplayName:c,Key:t.Key,TransferToNumber:u,KeyMappingType:r,KeyForDisplay:t.Key.toString(),KeyMappingTypeDisplay:v}}this.onOK([e]);this.onDialogClose()},onFindMeDialogOK:function(n){var i=null;var r=null;try{i=EcpUtil.deserializeArray(n)}catch(o){}_Object.isNullOrUndefined(i)||(n=i);if(!_Object.isNullOrUndefined(n)&&n.length>0){var t=n[0];var f=t.FindMeSecondNumber;var u=0;EcpUtil.isNullOrBlank(f)||(u=t.FindMeSecondNumberDuration);var e=KeyMapping.getKeyMappingTypeDisplay("FindMe",_String.empty,_String.empty);r={Context:t.Context,FindMeFirstNumber:t.FindMeFirstNumber,FindMeFirstNumberDuration:t.FindMeFirstNumberDuration,Key:t.Key,FindMeSecondNumber:t.FindMeSecondNumber,FindMeSecondNumberDuration:u,KeyMappingType:"FindMe",KeyForDisplay:t.Key.toString(),KeyMappingTypeDisplay:e}}this.onOK([r]);this.onDialogClose()}};function ExtensionsDialedPicker(n){ExtensionsDialedPicker.initializeBase(this,[n])}ExtensionsDialedPicker.prototype={get_ExtensionsListView:function(){return this.$2S_4},set_ExtensionsListView:function(n){this.$2S_4=n;return n},$2S_4:null,get_value:function(){for(var t=new Array(this.$2S_4.get_selectedItems().length),i=0,r=this.$2S_4.get_selectedItems(),u=r.length,n=0;n<u;++n){var f=r[n];t[i]=f.getCellText(0);i++}return t},set_value:function(n){if(n)for(var u=n,t,f=this.$2S_4.get_items(),o=f.length,i=0;i<o;++i){var e=f[i];t=!1;for(var r=0;r<u.length;r++)if(e.getCellText(0)===u[r]){t=!0;break}e.set_selected(t)}return n},get_setErrorsWarningsDelegate:function(){return this.$9_4},set_setErrorsWarningsDelegate:function(n){this.$9_4=n;return n},$9_4:null,get_enableOkButtonDelegate:function(){return this.$5_4},set_enableOkButtonDelegate:function(n){this.$5_4=n;return n},$5_4:null};GroupNamingPolicyEditorContext.registerClass("GroupNamingPolicyEditorContext");ComboBoxSizeMoniter.registerClass("ComboBoxSizeMoniter");CallTransferViewModel.registerClass("CallTransferViewModel",PopupFormViewModel);DateRangeControl.registerClass("DateRangeControl",ContainerControl,IEditControl);DLPPicker.registerClass("DLPPicker",ContainerControl,IEditControl);EnumPicker.registerClass("EnumPicker",ContainerControl,IEditControl);EnhancedEnumPicker.registerClass("EnhancedEnumPicker",EnumPicker);EntryEditors.registerClass("EntryEditors");FolderPicker.registerClass("FolderPicker",TreeBasedPicker);FolderPickerTreeSource.registerClass("FolderPickerTreeSource",WebServiceTreeSource);RulesFolderPicker.registerClass("RulesFolderPicker",FolderPicker);VoiceMailFolderPicker.registerClass("VoiceMailFolderPicker",FolderPicker);FormletControlBase.registerClass("FormletControlBase",ContainerControl);GroupNamingPolicyEditor.registerClass("GroupNamingPolicyEditor",ContainerControl,IValidatable);IncidentReportContentEditControl.registerClass("IncidentReportContentEditControl",ContainerControl,IEditControl);InlineEditor.registerClass("InlineEditor",ContainerControl,IEditControl,IFallibleControl);RuleEditor.registerClass("RuleEditor",ContainerControl,IValidatable);InboxRuleEditor.registerClass("InboxRuleEditor",RuleEditor);JournalRuleEditor.registerClass("JournalRuleEditor",RuleEditor);RecipientConditionEditor.registerClass("RecipientConditionEditor",ContainerControl,IValidatable);MoreOptionRecipientConditionEditor.registerClass("MoreOptionRecipientConditionEditor",RecipientConditionEditor);StringEditControlBase.registerClass("StringEditControlBase",ContainerControl);MultilineStringEditControl.registerClass("MultilineStringEditControl",StringEditControlBase,IEditControl);RulePhraseParameterEditor.registerClass("RulePhraseParameterEditor",EcpControl);NotificationPhoneNumberParameterEditor.registerClass("NotificationPhoneNumberParameterEditor",RulePhraseParameterEditor,IEntryEditor,IRefreshable);NumberRangeControl.registerClass("NumberRangeControl",ContainerControl,IEditControl);StringEditControl.registerClass("StringEditControl",StringEditControlBase,IEditControl);NumberEditControl.registerClass("NumberEditControl",StringEditControl);NumericInputBehavior.registerClass("NumericInputBehavior",Sys.UI.Behavior);ObjectPicker.registerClass("ObjectPicker",PickerControlBase,IEntryEditor);PeoplePicker.registerClass("PeoplePicker",PickerControlBase,IEntryEditor);RulePhraseEditor.registerClass("RulePhraseEditor",EcpControl);PreCannedPhraseEditor.registerClass("PreCannedPhraseEditor",RulePhraseEditor);RuleEditorUtil.registerClass("RuleEditorUtil");StringArrayParameterEditor.registerClass("StringArrayParameterEditor",RulePhraseParameterEditor);StringParameterEditor.registerClass("StringParameterEditor",RulePhraseParameterEditor);ADAttributeParameterEditor.registerClass("ADAttributeParameterEditor",RulePhraseParameterEditor);CallerIdsParameterEditor.registerClass("CallerIdsParameterEditor",RulePhraseParameterEditor);TimePeriodParameterEditor.registerClass("TimePeriodParameterEditor",RulePhraseParameterEditor);ExtensionsDialedParameterEditor.registerClass("ExtensionsDialedParameterEditor",RulePhraseParameterEditor);KeyMappingsParameterEditor.registerClass("KeyMappingsParameterEditor",RulePhraseParameterEditor);EnumParameterEditor.registerClass("EnumParameterEditor",RulePhraseParameterEditor);NumberEnumParameterEditor.registerClass("NumberEnumParameterEditor",EnumParameterEditor);NumberParameterEditor.registerClass("NumberParameterEditor",RulePhraseParameterEditor);ByteQuantifiedSizeParameterEditor.registerClass("ByteQuantifiedSizeParameterEditor",NumberParameterEditor);EnhancedEnumParameterEditor.registerClass("EnhancedEnumParameterEditor",EnumParameterEditor);FolderParameterEditor.registerClass("FolderParameterEditor",RulePhraseParameterEditor);OUPickerParameterEditor.registerClass("OUPickerParameterEditor",RulePhraseParameterEditor);ObjectArrayParameterEditor.registerClass("ObjectArrayParameterEditor",RulePhraseParameterEditor);ObjectParameterEditor.registerClass("ObjectParameterEditor",ObjectArrayParameterEditor);PeopleParameterEditor.registerClass("PeopleParameterEditor",ObjectArrayParameterEditor);ObjectsParameterEditor.registerClass("ObjectsParameterEditor",ObjectArrayParameterEditor);NumberRangeParameterEditor.registerClass("NumberRangeParameterEditor",RulePhraseParameterEditor);DateRangeParameterEditor.registerClass("DateRangeParameterEditor",RulePhraseParameterEditor);HiddenParameterEditor.registerClass("HiddenParameterEditor",RulePhraseParameterEditor);JournalRuleScopeParameterEditor.registerClass("JournalRuleScopeParameterEditor",HiddenParameterEditor);DLPParameterEditor.registerClass("DLPParameterEditor",RulePhraseParameterEditor);SenderNotifyParameterEditor.registerClass("SenderNotifyParameterEditor",RulePhraseParameterEditor);IncidentReportContentParameterEditor.registerClass("IncidentReportContentParameterEditor",RulePhraseParameterEditor);SenderNotifyEditControl.registerClass("SenderNotifyEditControl",ContainerControl,IEditControl);SimpleEntryEditor.registerClass("SimpleEntryEditor",Dialog,IEntryEditor);TransportRuleEditor.registerClass("TransportRuleEditor",RuleEditor);ADAttributePicker.registerClass("ADAttributePicker",ContainerControl,IEditControl);CallerIdItem.registerClass("CallerIdItem");CallerIdsPicker.registerClass("CallerIdsPicker",ContainerControl,IEditControl);TimePeriodPicker.registerClass("TimePeriodPicker",ContainerControl,IEditControl);UMCallAnsweringRuleEditor.registerClass("UMCallAnsweringRuleEditor",RuleEditor);KeyMapping.registerClass("KeyMapping");KeyMappingsPicker.registerClass("KeyMappingsPicker",EcpCollectionEditor);ExtensionsDialedPicker.registerClass("ExtensionsDialedPicker",ContainerControl,IEditControl);EnhancedEnumPicker.$4t='<div class="ProgressPanel"><SPAN>{0}</SPAN></div>';EntryEditors.stringArrayModalEditor="StringArrayModalEditor";EntryEditors.stringModalEditor="StringModalEditor";EntryEditors.numberModalEditor="NumberModalEditor";EntryEditors.multilineStringModalEditor="MultilineStringModalEditor";EntryEditors.enhancedEnumComboBoxModalEditor="EnhancedEnumComboBoxModalEditor";EntryEditors.enumComboBoxModalEditor="EnumComboBoxModalEditor";EntryEditors.enumCheckBoxModalEditor="EnumCheckBoxModalEditor";EntryEditors.objectArrayModalEditor="ObjectArrayModalEditor";EntryEditors.peoplePicker="PeoplePicker";EntryEditors.objectPicker="ObjectPicker";EntryEditors.numberRangeModalEditor="NumberRangeModalEditor";EntryEditors.dateRangeModalEditor="DateRangeModalEditor";EntryEditors.rulesFolderPicker="RulesFolderPicker";EntryEditors.adAttributeModalEditor="ADAttributeModalEditor";EntryEditors.dlpModalEditor="DLPModalEditor";EntryEditors.senderNotifyEditor="SenderNotifyEditor";EntryEditors.timePeriodEditor="TimePeriodEditor";EntryEditors.callerIdEditor="CallerIdsEditor";EntryEditors.keyMappingsEditor="KeyMappingsEditor";EntryEditors.extensionsDialedEditor="ExtensionsDialedEditor";EntryEditors.organizationalUnitPicker="OUPicker";EntryEditors.incidentReportContentEditor="IncidentReportContentEditor";EntryEditors.$3n={};FolderPicker.spriteName="Navigation";JournalRuleEditor.$55=new RegExp("^([\\w\\.!#$%&'*+-/=?^_`{|}~\\u00A1-\\u00FF])+@(([a-zA-Z\\d-])+\\.)+([a-zA-Z\\d]+)$");NotificationPhoneNumberParameterEditor.$4p=EcpUrl.get_ecpFullUrl()+"SMS/SmsOptions.svc";NotificationPhoneNumberParameterEditor.$4u=EcpUrl.get_ecpFullUrl()+"sms/EditNotification.aspx";NotificationPhoneNumberParameterEditor.$1D=null;NotificationPhoneNumberParameterEditor.$4O=!1;RuleEditor.nameParameterString="Name";SimpleEntryEditor.$4f='<table cellpadding="0" cellspacing="0" class="MsgCtrl" role="presentation" ><tr><td><div class="title"><div class="ttlrwx"><img id="{0}_ImageX" class="imgx CommonSprite formletClose" alt="{2}" title="{2}" buttontype="Cancel" src="{4}"/><span id="{0}_ImageXAlter" class="imgx formletCloseAlter" title="{2}" buttontype="Cancel">'+AriaUtil.closeIconFont+"</span>"+"</div>"+'<div class="pickerTtlrw">'+"{1}"+"</div>"+"</div>"+"</td>"+"</tr>"+"<tr>"+'<td id="{0}_tdDlgBdy">'+'<table cellspacing="0" cellpadding="0" class="bdy" role="presentation">'+"<tr>"+'<td class="msgbox">'+'<div class="hw100">'+'<div id="{0}_errorDiv" class="errDiv alertDiv" style="display:none">'+'<div class="alertDivContent"></div>'+"</div>"+'<div id="{0}_ctlDiv" class="hw100">'+"</div></div>"+"</td>"+"</tr>"+"<tr>"+'<td class="pickerBtnBox">'+"{3}"+"</td>"+"</tr>"+"</table>"+"</td>"+"</tr>"+"</table>";SimpleEntryEditor.$4T='<button id="{0}" type="button" buttontype="{1}">{2}</button>';KeyMapping.keyMappingTransferToNumber="TransferToNumber";KeyMapping.keyMappingVoiceMail="VoiceMail";KeyMapping.keyMappingFindMe="FindMe";KeyMapping.keyMappingTransferToGALContactLegacyDN="TransferToGALContact";KeyMapping.keyMappingTransferToGALContactVoicemail="TransferToGALContactVoiceMail"